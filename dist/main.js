!function(){"use strict";function t(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,e)}return n}function r(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?t(Object(o),!0).forEach((function(t){n(r,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))}))}return r}function n(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function e(t,r){if(t){if("string"==typeof t)return o(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,r):void 0}}function o(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function i(t,r,n){var e=[];if("x"===n)for(var o=t[0],i=t[1],a=0;a<r;a++)e.push([o,+i+a]);else if("y"===n)for(var u=t[0],c=t[1],f=0;f<r;f++)e.push([+u+f,c]);return e}var a=function(t,n,o){var a,u={positions:{},createPos:t,axis:o,len:n},c=i(t,n,o),f=function(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=e(t))){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw a}}}}(c);try{for(f.s();!(a=f.n()).done;){var l=a.value;u.positions[String(l)]="good"}}catch(t){f.e(t)}finally{f.f()}var s,d,p=(s=c.slice(-1),d=1,function(t){if(Array.isArray(t))return t}(s)||function(t,r){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var e,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(e=n.next()).done)&&(i.push(e.value),!r||i.length!==r);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(s,d)||e(s,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return u.lastPosition=p[0],r(r(r(r(r(r(r({},function(t){return{getPositions:function(){return t.positions}}}(u)),function(t){return{isSunk:function(){return Object.values(t.positions).every((function(t){return"hit"===t}))}}}(u)),function(t){return{hit:function(r){t.positions[String(r)]="hit"}}}(u)),function(t){return{getLen:function(){return t.len}}}(u)),function(t){return{getCreatePos:function(){return t.createPos}}}(u)),function(t){return{getLastPos:function(){return t.lastPosition}}}(u)),function(t){return{getAxis:function(){return t.axis}}}(u))};function u(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,e)}return n}function c(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?u(Object(n),!0).forEach((function(r){f(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))}))}return t}function f(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function l(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,r){if(t){if("string"==typeof t)return s(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function s(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function d(t,r,n){r.forEach((function(r){t.positions[String(r)]=n}))}function p(t){return Object.keys(t.getPositions())}function y(t,r){var n=p(r),e=[];return n.forEach((function(r){for(var n=r.split(","),o=-1;o<2;o+=1)for(var i=-1;i<2;i+=1){var a=String([+n[0]+o,+n[1]+i]);"empty"!==t.positions[a]&&"unavailable"!==t.positions[a]||e.includes(a)||e.push(a)}})),e}function v(t,r,n,e){var o=a(r,n,e);return function(t,r){d(t,p(r),"ship")}(t,o),function(t,r){d(t,y(t,r),"unavailable")}(t,o),function(t,r){t.ships.push(r)}(t,o),o}function h(t,r){!function(t,r){d(t,p(r),"empty")}(t,r),function(t,r){d(t,y(t,r),"empty")}(t,r),function(t,r){var n=t.ships.indexOf(r);t.ships.splice(n,1)}(t,r)}function m(t,r){var n,e=l(t);try{for(e.s();!(n=e.n()).done;){var o=n.value;if(Object.keys(o.getPositions()).includes(String(r)))return o}}catch(t){e.e(t)}finally{e.f()}}function b(t,r){return"ship"===t.positions[String(r)]}var g=function(t){for(var r={positions:{},ships:[],gameBoardLen:t},n=0;n<t;n++)for(var e=0;e<t;e++)r.positions[String([n,e])]="empty";return c(c(c(c(c(c(c(c(c(c({},function(t){return{getPositions:function(){return t.positions}}}(r)),function(t){return{getShips:function(){return t.ships}}}(r)),function(t){return{createShip:function(r,n,e){return v(t,r,n,e)}}}(r)),function(t){return{removeShip:function(r){h(t,r)}}}(r)),function(t){return{changeShipAxis:function(r,n){return function(t,r){return h(t,r),v(t,r.getCreatePos(),r.getLen(),"x"===r.getAxis()?"y":"x")}(t,r)}}}(r)),function(t){return{checkPlacement:function(r,n,e){return function(t,r,n,e){var o,a=l(i(r,n,e));try{for(a.s();!(o=a.n()).done;){var u=o.value;if("empty"!==t.positions[String(u)])return!1}}catch(t){a.e(t)}finally{a.f()}return!0}(t,r,n,e)}}}(r)),function(t){return{receiveAttack:function(r){return function(t,r){if(b(t,r)){var n=m(t.ships,r);return n.hit(r),n}}(t,r)}}}(r)),function(t){return{isGameOver:function(){return function(t){var r=!0;return t.ships.forEach((function(t){t.isSunk()||(r=!1)})),r}(t)}}}(r)),function(t){return{checkAttack:function(r){return b(t,r)}}}(r)),function(t){return{getPositionsAroundShip:function(r){return y(t,r)}}}(r))};function S(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,e)}return n}function O(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?S(Object(n),!0).forEach((function(r){A(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))}))}return t}function A(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function j(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}var w=10;function P(t){for(var r=0;r<w;r++)for(var n=0;n<w;n++)t.availableShots.push(String([r,n]))}var E=function(t){return{getGameBoard:function(){return t.gameBoard}}},L=function(t){return{getGameBoardLen:function(){return t.gameBoardLen}}},x=function(t){return{createShip:function(r,n,e){return function(t,r,n,e){return t.gameBoard.createShip(r,n,e)}(t,r,n,e)}}};function I(t,r,n,e){return t.gameBoard.checkPlacement(r,n,e)}var k=function(t){return{checkPlacement:function(r,n,e){return I(t,r,n,e)}}},C=function(t){return{removeShip:function(r){!function(t,r){t.gameBoard.removeShip(r)}(t,r)}}},B=function(t){return{changeShipAxis:function(r){return function(t,r){return t.gameBoard.changeShipAxis(r)}(t,r)}}};function M(t){return t[Math.floor(t.length*Math.random())]}var T=function(t){return{getRandomShip:function(r){return function(t,r){for(var n=[],e=0;e<w;e++)for(var o=0;o<w;o++)n.push([e,o]);for(;;){var i=M(n),u=Math.floor(100*Math.random())%2==0?"x":"y";if(I(t,i,r,u))return a(i,r,u);var c="x"===u?"y":"x";if(I(t,i,r,c))return a(i,r,c);n.splice(n.indexOf(i),1)}}(t,r)}}},D=function(t){return{clear:function(){!function(t){for(var r=function(t){if(Array.isArray(t))return j(t)}(e=t.gameBoard.getShips())||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,r){if(t){if("string"==typeof t)return j(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(t,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=0;n<r.length;n++)t.gameBoard.removeShip(r[n]);var e}(t)}}},G=function(t){return{getAvailableShots:function(){return t.availableShots}}},U=function(t){return{attack:function(r,n){return function(t,r,n){var e=t.availableShots.indexOf(String(n));t.availableShots.splice(e,1);var o=r.receiveAttack(n);return o&&o.isSunk()&&r.getPositionsAroundShip(o).forEach((function(r){var n=t.availableShots.indexOf(String(r));-1!==n&&t.availableShots.splice(n,1)})),o}(t,r,n)}}};function $(){var t={gameBoard:g(w),gameBoardLen:w,availableShots:[]};return P(t),O(O(O(O(O(O(O(O(O(O(O({},E(t)),L(t)),x(t)),k(t)),C(t)),B(t)),T(t)),D(t)),G(t)),U(t)),function(t){return{getAttackPosition:function(){return function(t){return n=(r=t.availableShots).length,r[Math.floor(Math.random()*n)];var r,n}(t)}}}(t))}function q(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function H(){for(var t=document.createElement("div"),r=0;r<w;r++)for(var n=0;n<w;n++){var e=document.createElement("div");e.classList.add("position","p-".concat(r,"-").concat(n)),t.appendChild(e)}return t.classList.add("game-board"),t}function R(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var e,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(e=n.next()).done)&&(i.push(e.value),!r||i.length!==r);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,r)||z(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,r){if(t){if("string"==typeof t)return F(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(t,r):void 0}}function F(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}var J=function(t,r,n){var e,o,i=function(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=z(t))){n&&(t=n);var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(r);try{for(i.s();!(e=i.n()).done;){var a=e.value,u=R(String(a).split(","),2),c=u[0],f=u[1];(o=t.children,function(t){if(Array.isArray(t))return F(t)}(o)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||z(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[+c*w+ +f].classList.add(n)}}catch(t){i.e(t)}finally{i.f()}};function K(t){return function(t){if(Array.isArray(t))return Q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||N(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,r){if(t){if("string"==typeof t)return Q(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,r):void 0}}function Q(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function V(t){var r=document.createElement("div"),n=document.createElement("div");n.textContent=t;var e=document.createElement("button");return e.textContent="play again",r.appendChild(n),r.appendChild(e),r}function W(t,r,n,e,o){var i,a,u,c,f=t.getAttackPosition(),l=t.attack(r,f),s=K(n.children)[(i=f,a=function(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var e,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(e=n.next()).done)&&(i.push(e.value),!r||i.length!==r);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(t,r)||N(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(String(i).split(","),2),u=a[0],c=a[1],+u*w+ +c)];if(l){if(s.classList.add("hit"),l.isSunk()){var d=r.getPositionsAroundShip(l);J(n,d,"invalid")}}else s.classList.add("miss");if(r.isGameOver()){var p=V("you lost!");e.classList.add("finished"),o.appendChild(p),p.querySelector("button").addEventListener("click",(function(){o.innerHTML="",rt(o)}))}}var X;function Y(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}var Z=function(t,r){for(var n=function(n){for(var e=function(e){var o;(o=t.children,function(t){if(Array.isArray(t))return Y(t)}(o)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||function(t,r){if(t){if("string"==typeof t)return Y(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(t,r):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[n*w+e].addEventListener("click",(function(o){if(X)o.target.getAttribute("class").includes("ship");else if(o.target.getAttribute("class").includes("ship")){X=m(r.getShips(),[n,e]),r.removeShip(X);var a=i(X.getCreatePos(),X.getLen(),X.getAxis());J(t,a,"selected")}}))},o=0;o<w;o++)e(o)},e=0;e<w;e++)n(e)},_=[4,3,3,2,2,2,1,1,1,1];function tt(t,r,n){n.forEach((function(n){var e=t.getRandomShip(n);!function(t,r,n,e,o){var a=t.createShip(n,e,o);(function(t,r){t.forEach((function(t){var n=".p-".concat(String(t).replace(",","-"));r.querySelector(n).classList.add("ship")}))})(i(n,e,o),r)}(t,r,e.getCreatePos(),n,e.getAxis())}))}var rt=function(t){var r,n=H(),e=(P(r={gameBoard:g(w),gameBoardLen:w,availableShots:[]}),O(O(O(O(O(O(O(O(O(O({},E(r)),L(r)),x(r)),k(r)),C(r)),B(r)),T(r)),D(r)),G(r)),U(r))),o=document.createElement("div");o.classList.add("board-container"),o.appendChild(n);var i=document.createElement("button");i.textContent="random",i.classList.add("random");var a=document.createElement("button");a.textContent="start",a.classList.add("start"),t.appendChild(o),t.appendChild(i),t.appendChild(a),tt(e,n,_),Z(n,e.getGameBoard()),i.addEventListener("click",(function(){var t;e.clear(),(t=n.children,function(t){if(Array.isArray(t))return q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return q(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(t){t.classList.remove("ship","selected")})),tt(e,n,_),X=void 0})),a.addEventListener("click",(function(){var r=$(),o=H();tt(r,o,_),t.innerHTML="",function(t,r,n,e,o){var i=document.createElement("div");i.classList.add("boards-container"),i.appendChild(e),i.appendChild(o);for(var a=K(o.children),u=function(i){for(var u=function(u){a[i*w+u].addEventListener("click",(function(a){var c=a.target;!function(t,r,n,e,o,i,a,u,c){var f=r.attack(o,t);if(f){if(u.classList.add("hit"),f.isSunk()){var l=o.getPositionsAroundShip(f);J(i,l,"invalid")}}else u.classList.add("miss");if(o.isGameOver()){var s=V("you won!");i.classList.add("finished"),c.appendChild(s),s.querySelector("button").addEventListener("click",(function(){c.innerHTML="",rt(c)}))}else W(n,e,a,i,c)}([i,u],r,n,r.getGameBoard(),n.getGameBoard(),o,e,c,t)}))},c=0;c<w;c++)u(c)},c=0;c<w;c++)u(c);t.appendChild(i)}(t,e,r,n,o)}))},nt=document.querySelector("main");rt(nt)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Yy9zaGlwcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWVCb2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3BsYXllci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3NldHVwLWRvbS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWUtZG9tLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZVBsYXkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9zaGlwLXBsYWNlbWVudC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3NldHVwLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gbWV0aG9kIHRoYXQgbWFya3MgYSBwb3NpdGlvbiBhcyBoaXRcbmZ1bmN0aW9uIGFkZEhpdChzdGF0ZSkge1xuICByZXR1cm4ge1xuICAgIGhpdChoaXRQb3NpdGlvbikge1xuICAgICAgc3RhdGUucG9zaXRpb25zW1N0cmluZyhoaXRQb3NpdGlvbildID0gXCJoaXRcIjtcbiAgICB9LFxuICB9O1xufVxuXG4vLyBjaGVjayBpZiBzaGlwIGlzIHN1bmtcbmNvbnN0IGFkZElzU3VuayA9IChzdGF0ZSkgPT4gKHtcbiAgaXNTdW5rKCkge1xuICAgIHJldHVybiBPYmplY3QudmFsdWVzKHN0YXRlLnBvc2l0aW9ucykuZXZlcnkoKHZhbHVlKSA9PiB2YWx1ZSA9PT0gXCJoaXRcIik7XG4gIH0sXG59KTtcblxuLy8gbWV0aG9kIGZvciBnZXR0aW5nIHBvc2l0aW9ucyBvZiBzaGlwXG5jb25zdCBhZGRHZXRQb3NpdGlvbnMgPSAoc3RhdGUpID0+ICh7XG4gIGdldFBvc2l0aW9ucygpIHtcbiAgICByZXR1cm4gc3RhdGUucG9zaXRpb25zO1xuICB9LFxufSk7XG5cbmNvbnN0IGFkZEdldExlbiA9IChzdGF0ZSkgPT4gKHtcbiAgZ2V0TGVuKCkge1xuICAgIHJldHVybiBzdGF0ZS5sZW47XG4gIH0sXG59KTtcblxuY29uc3QgYWRkR2V0QXhpcyA9IChzdGF0ZSkgPT4gKHtcbiAgZ2V0QXhpcygpIHtcbiAgICByZXR1cm4gc3RhdGUuYXhpcztcbiAgfSxcbn0pO1xuXG5jb25zdCBhZGRHZXRDcmVhdGVQb3MgPSAoc3RhdGUpID0+ICh7XG4gIGdldENyZWF0ZVBvcygpIHtcbiAgICByZXR1cm4gc3RhdGUuY3JlYXRlUG9zO1xuICB9LFxufSk7XG5cbmNvbnN0IGFkZEdldExhc3RQb3MgPSAoc3RhdGUpID0+ICh7XG4gIGdldExhc3RQb3MoKSB7XG4gICAgcmV0dXJuIHN0YXRlLmxhc3RQb3NpdGlvbjtcbiAgfSxcbn0pO1xuXG4vLyBwcmVkaWN0cyBzaGlwIHBvc2l0aW9ucyBpZiBjcmVhdGVkIHRvIGNoZWNrIGZvciB0aGVpciB2YWxpZGl0eVxuZnVuY3Rpb24gcHJlZGljdFNoaXBQb3NpdGlvbnMoY3JlYXRlUG9zLCBsZW4sIGF4aXMpIHtcbiAgY29uc3QgcG9zaXRpb25zID0gW107XG4gIGlmIChheGlzID09PSBcInhcIikge1xuICAgIGZvciAobGV0IGkgPSBjcmVhdGVQb3NbMF0sIGogPSBjcmVhdGVQb3NbMV0sIGsgPSAwOyBrIDwgbGVuOyBrKyspIHtcbiAgICAgIHBvc2l0aW9ucy5wdXNoKFtpLCAraiArIGtdKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoYXhpcyA9PT0gXCJ5XCIpIHtcbiAgICBmb3IgKGxldCBpID0gY3JlYXRlUG9zWzBdLCBqID0gY3JlYXRlUG9zWzFdLCBrID0gMDsgayA8IGxlbjsgaysrKSB7XG4gICAgICBwb3NpdGlvbnMucHVzaChbK2kgKyBrLCBqXSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBwb3NpdGlvbnM7XG59XG5cbi8vIGdhbWVib2FyZCBmYWN0b3J5IGZ1bmN0aW9uXG5mdW5jdGlvbiBTaGlwKGNyZWF0ZVBvcywgbGVuLCBheGlzKSB7XG4gIGNvbnN0IHN0YXRlID0ge1xuICAgIHBvc2l0aW9uczoge30sXG4gICAgY3JlYXRlUG9zLFxuICAgIGF4aXMsXG4gICAgbGVuLFxuICB9O1xuICAvLyBwb3B1bGF0aW5nIHRoZSBwb3NpdGlvbnMgb2YgdGhlIHNoaXBcbiAgY29uc3QgcHJlZGljdGVkUG9zaXRpb25zID0gcHJlZGljdFNoaXBQb3NpdGlvbnMoY3JlYXRlUG9zLCBsZW4sIGF4aXMpO1xuICBmb3IgKGNvbnN0IHAgb2YgcHJlZGljdGVkUG9zaXRpb25zKSB7XG4gICAgc3RhdGUucG9zaXRpb25zW1N0cmluZyhwKV0gPSBcImdvb2RcIjtcbiAgfVxuXG4gIC8vIHNldCBlbmRQb3N0aW9uIGZvciBzaGlwXG4gIFtzdGF0ZS5sYXN0UG9zaXRpb25dID0gcHJlZGljdGVkUG9zaXRpb25zLnNsaWNlKC0xKTtcblxuICByZXR1cm4ge1xuICAgIC4uLmFkZEdldFBvc2l0aW9ucyhzdGF0ZSksXG4gICAgLi4uYWRkSXNTdW5rKHN0YXRlKSxcbiAgICAuLi5hZGRIaXQoc3RhdGUpLFxuICAgIC4uLmFkZEdldExlbihzdGF0ZSksXG4gICAgLi4uYWRkR2V0Q3JlYXRlUG9zKHN0YXRlKSxcbiAgICAuLi5hZGRHZXRMYXN0UG9zKHN0YXRlKSxcbiAgICAuLi5hZGRHZXRBeGlzKHN0YXRlKSxcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgU2hpcDtcbmV4cG9ydCB7IHByZWRpY3RTaGlwUG9zaXRpb25zIH07XG4iLCJpbXBvcnQgU2hpcCwgeyBwcmVkaWN0U2hpcFBvc2l0aW9ucyB9IGZyb20gXCIuL3NoaXBzXCI7XG5cbi8vIGNoYW5nZSB0aGUgZ2l2ZW4gcG9zaXRpb25zIGluIHRoZSBnYW1lIGJvYXJkc1xuZnVuY3Rpb24gY2hhbmdlR2FtZUJvYXJkUG9zaXRpb25zKHN0YXRlLCBwb3NpdGlvbnMsIHZhbHVlKSB7XG4gIHBvc2l0aW9ucy5mb3JFYWNoKChwKSA9PiB7XG4gICAgc3RhdGUucG9zaXRpb25zW1N0cmluZyhwKV0gPSB2YWx1ZTtcbiAgfSk7XG59XG5cbi8vIGdldCB0aGUgc2hpcCBwb3NpdGlvbnMgYXMgYSBsaXN0XG5mdW5jdGlvbiBnZXRTaGlwUG9zaXRpb25zKHNoaXApIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHNoaXAuZ2V0UG9zaXRpb25zKCkpO1xufVxuXG4vLyBjaGFuZ2VzIHBvc2l0aW9ucyBpbiBnYW1lIGJvYXJkIHRvICdzaGlwJ1xuZnVuY3Rpb24gY2hhbmdlU2hpcFBvc2l0aW9ucyhzdGF0ZSwgc2hpcCkge1xuICBjb25zdCBzaGlwUG9zaXRpb25zID0gZ2V0U2hpcFBvc2l0aW9ucyhzaGlwKTtcbiAgY2hhbmdlR2FtZUJvYXJkUG9zaXRpb25zKHN0YXRlLCBzaGlwUG9zaXRpb25zLCBcInNoaXBcIik7XG59XG5cbi8vIGdldCBwb3NpdGlvbnMgYXJyb3VuZCBzaGlwXG5mdW5jdGlvbiBnZXRQb3NpdGlvbnNBcm91bmRTaGlwKHN0YXRlLCBzaGlwKSB7XG4gIGNvbnN0IHNoaXBQb3NpdGlvbnMgPSBnZXRTaGlwUG9zaXRpb25zKHNoaXApO1xuICBjb25zdCBhcm91bmRQb3NpdGlvbnMgPSBbXTtcbiAgc2hpcFBvc2l0aW9ucy5mb3JFYWNoKChwKSA9PiB7XG4gICAgY29uc3QgcEFzTGlzdCA9IHAuc3BsaXQoXCIsXCIpO1xuICAgIGZvciAobGV0IGkgPSAtMTsgaSA8IDI7IGkgKz0gMSkge1xuICAgICAgZm9yIChsZXQgaiA9IC0xOyBqIDwgMjsgaiArPSAxKSB7XG4gICAgICAgIGNvbnN0IG5ld1BvcyA9IFN0cmluZyhbK3BBc0xpc3RbMF0gKyBpLCArcEFzTGlzdFsxXSArIGpdKTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIChzdGF0ZS5wb3NpdGlvbnNbbmV3UG9zXSA9PT0gXCJlbXB0eVwiIHx8XG4gICAgICAgICAgICBzdGF0ZS5wb3NpdGlvbnNbbmV3UG9zXSA9PT0gXCJ1bmF2YWlsYWJsZVwiKSAmJlxuICAgICAgICAgICFhcm91bmRQb3NpdGlvbnMuaW5jbHVkZXMobmV3UG9zKVxuICAgICAgICApIHtcbiAgICAgICAgICBhcm91bmRQb3NpdGlvbnMucHVzaChuZXdQb3MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGFyb3VuZFBvc2l0aW9ucztcbn1cblxuLy8gYWRkcyBnZXQgcG9zaXRpb25zIGFyb3VuZCBzaGlwIG1ldGhvZCB0byBvYmplY3RcbmNvbnN0IGFkZEdldFBvc2l0aW9uc0Fyb3VuZFNoaXAgPSAoc3RhdGUpID0+ICh7XG4gIGdldFBvc2l0aW9uc0Fyb3VuZFNoaXA6IChzaGlwKSA9PiBnZXRQb3NpdGlvbnNBcm91bmRTaGlwKHN0YXRlLCBzaGlwKSxcbn0pO1xuXG4vLyBjaGFuZ2VzIGFycm91bmQgdGhlIHNoaXAgcG9zaXRpb25zIHRvICd1bmF2YWlsYWJsZSdcbmZ1bmN0aW9uIGNoYW5nZUFyb3VuZFNoaXBQb3NpdGlvbnMoc3RhdGUsIHNoaXApIHtcbiAgY29uc3QgYXJvdW5kUG9zaXRpb25zID0gZ2V0UG9zaXRpb25zQXJvdW5kU2hpcChzdGF0ZSwgc2hpcCk7XG4gIGNoYW5nZUdhbWVCb2FyZFBvc2l0aW9ucyhzdGF0ZSwgYXJvdW5kUG9zaXRpb25zLCBcInVuYXZhaWxhYmxlXCIpO1xufVxuXG4vLyBhZGQgc2hpcCB0byB0aGUgZ2FtZWJvYXJkIHNoaXBzXG5mdW5jdGlvbiBhZGRTaGlwVG9HYW1lQm9hcmRTaGlwcyhzdGF0ZSwgc2hpcCkge1xuICBzdGF0ZS5zaGlwcy5wdXNoKHNoaXApO1xufVxuXG4vLyBtZXRob2QgZm9yIHBsYWNpbmcgc2hpcHMgaW4gZ2FtZWJvYXJkIChyZXR1cm5zIHRoZSBzaGlwKVxuZnVuY3Rpb24gY3JlYXRlU2hpcChzdGF0ZSwgY3JlYXRlUG9zLCBsZW4sIGF4aXMpIHtcbiAgY29uc3Qgc2hpcCA9IFNoaXAoY3JlYXRlUG9zLCBsZW4sIGF4aXMpO1xuICBjaGFuZ2VTaGlwUG9zaXRpb25zKHN0YXRlLCBzaGlwKTtcbiAgY2hhbmdlQXJvdW5kU2hpcFBvc2l0aW9ucyhzdGF0ZSwgc2hpcCk7XG4gIGFkZFNoaXBUb0dhbWVCb2FyZFNoaXBzKHN0YXRlLCBzaGlwKTtcbiAgcmV0dXJuIHNoaXA7XG59XG5cbi8vIGFkZHMgdGhlIGNyZWF0ZVNoaXAgbWV0aG9kIHRvIG9iamVjdFxuY29uc3QgYWRkQ3JlYXRlU2hpcCA9IChzdGF0ZSkgPT4gKHtcbiAgY3JlYXRlU2hpcDogKGNyZWF0ZVBvcywgbGVuLCBheGlzKSA9PiBjcmVhdGVTaGlwKHN0YXRlLCBjcmVhdGVQb3MsIGxlbiwgYXhpcyksXG59KTtcblxuLy8gbWFrZXMgdGhlIHNoaXAgcG9zaXRpb25zICdlbXB0eSdcbmZ1bmN0aW9uIGVtcHR5U2hpcFBvc2l0aW9ucyhzdGF0ZSwgc2hpcCkge1xuICBjb25zdCBzaGlwUG9zaXRpb25zID0gZ2V0U2hpcFBvc2l0aW9ucyhzaGlwKTtcbiAgY2hhbmdlR2FtZUJvYXJkUG9zaXRpb25zKHN0YXRlLCBzaGlwUG9zaXRpb25zLCBcImVtcHR5XCIpO1xufVxuXG4vLyBtYWtlcyBhcm91bmQgdGhlIHNoaXAncyBwb3NpdGlvbiBlbXB0eVxuZnVuY3Rpb24gZW1wdHlBcm91bmRTaGlwUG9zaXRpb24oc3RhdGUsIHNoaXApIHtcbiAgY29uc3QgYXJvdW5kUG9zaXRpb25zID0gZ2V0UG9zaXRpb25zQXJvdW5kU2hpcChzdGF0ZSwgc2hpcCk7XG4gIGNoYW5nZUdhbWVCb2FyZFBvc2l0aW9ucyhzdGF0ZSwgYXJvdW5kUG9zaXRpb25zLCBcImVtcHR5XCIpO1xufVxuXG4vLyByZW1vdmVzIHRoZSBzaGlwIGZyb20gZ2FtZUJvYXJkIHNoaXBzXG5mdW5jdGlvbiByZW1vdmVTaGlwRnJvbUdhbWVCb2FyZFNoaXBzKHN0YXRlLCBzaGlwKSB7XG4gIGNvbnN0IHNoaXBJbmRleCA9IHN0YXRlLnNoaXBzLmluZGV4T2Yoc2hpcCk7XG4gIHN0YXRlLnNoaXBzLnNwbGljZShzaGlwSW5kZXgsIDEpO1xufVxuXG4vLyBtZXRob2QgZm9yIHJlbW92aW5nIHRoZSBzaGlwIChuZWVkcyBvbmUgYXJnKVxuZnVuY3Rpb24gcmVtb3ZlU2hpcChzdGF0ZSwgc2hpcCkge1xuICBlbXB0eVNoaXBQb3NpdGlvbnMoc3RhdGUsIHNoaXApO1xuICBlbXB0eUFyb3VuZFNoaXBQb3NpdGlvbihzdGF0ZSwgc2hpcCk7XG4gIHJlbW92ZVNoaXBGcm9tR2FtZUJvYXJkU2hpcHMoc3RhdGUsIHNoaXApO1xufVxuXG4vLyBhZGRzIHJlbW92ZXNoaXAgbWV0aG9kIHRvIGFuIG9iamVjdFxuY29uc3QgYWRkUmVtb3ZlU2hpcCA9IChzdGF0ZSkgPT4gKHtcbiAgcmVtb3ZlU2hpcDogKHNoaXApID0+IHtcbiAgICByZW1vdmVTaGlwKHN0YXRlLCBzaGlwKTtcbiAgfSxcbn0pO1xuXG4vLyBtZXRob2QgZm9yIHJlcG9zaXRpb25pbmcgdGhlIHNoaXBcbmZ1bmN0aW9uIGNoYW5nZVNoaXBBeGlzKHN0YXRlLCBzaGlwKSB7XG4gIHJlbW92ZVNoaXAoc3RhdGUsIHNoaXApO1xuICBjb25zdCBzaGlwQ3JlYXRlUG9zID0gc2hpcC5nZXRDcmVhdGVQb3MoKTtcbiAgY29uc3Qgc2hpcExlbiA9IHNoaXAuZ2V0TGVuKCk7XG4gIGNvbnN0IG5ld0F4aXMgPSBzaGlwLmdldEF4aXMoKSA9PT0gXCJ4XCIgPyBcInlcIiA6IFwieFwiO1xuICBjb25zdCBuZXdTaGlwID0gY3JlYXRlU2hpcChzdGF0ZSwgc2hpcENyZWF0ZVBvcywgc2hpcExlbiwgbmV3QXhpcyk7XG4gIHJldHVybiBuZXdTaGlwO1xufVxuXG4vLyBhZGRzIGNoYW5nZVNoaXBBeGl4IG1ldGhvZCB0byBhbiBvYmplY3RcbmNvbnN0IGFkZENoYW5nZVNoaXBBeGlzID0gKHN0YXRlKSA9PiAoe1xuICBjaGFuZ2VTaGlwQXhpczogKHNoaXAsIG5ld0F4aXMpID0+IGNoYW5nZVNoaXBBeGlzKHN0YXRlLCBzaGlwLCBuZXdBeGlzKSxcbn0pO1xuXG4vLyBtZXRob2QgdGhhdCBjaGVja3MgZm9yIHBsYWNlbWVudCB2YWxpZGl0eVxuZnVuY3Rpb24gY2hlY2tQbGFjZW1lbnQoc3RhdGUsIGNyZWF0ZVBvcywgbGVuLCBheGlzKSB7XG4gIGNvbnN0IHByZWRpY3RlZFBvc2l0aW9ucyA9IHByZWRpY3RTaGlwUG9zaXRpb25zKGNyZWF0ZVBvcywgbGVuLCBheGlzKTtcbiAgZm9yIChjb25zdCBwIG9mIHByZWRpY3RlZFBvc2l0aW9ucykge1xuICAgIGlmIChzdGF0ZS5wb3NpdGlvbnNbU3RyaW5nKHApXSAhPT0gXCJlbXB0eVwiKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyBhZGRzIGNoZWNrUGxhY2VtZW50IG1ldGhvZCB0byBhbiBvYmplY3RcbmNvbnN0IGFkZENoZWNrUGxhY2VtZW50ID0gKHN0YXRlKSA9PiAoe1xuICBjaGVja1BsYWNlbWVudDogKGNyZWF0ZVBvcywgbGVuLCBheGlzKSA9PlxuICAgIGNoZWNrUGxhY2VtZW50KHN0YXRlLCBjcmVhdGVQb3MsIGxlbiwgYXhpcyksXG59KTtcblxuLy8gbWV0aG9kIGZvciBnZXR0aW5nIHRoZSBwb3NpdGlvbnMgb2YgZ2FtZSBib2FyZFxuY29uc3QgYWRkR2V0UG9zaXRpb25zID0gKHN0YXRlKSA9PiAoe1xuICBnZXRQb3NpdGlvbnMoKSB7XG4gICAgcmV0dXJuIHN0YXRlLnBvc2l0aW9ucztcbiAgfSxcbn0pO1xuXG4vLyBtZXRob2QgZm9yIGdldHRpbmcgdGhlIHNoaXBzIG9mIGdhbWUgYm9hcmRcbmNvbnN0IGFkZEdldFNoaXBzID0gKHN0YXRlKSA9PiAoe1xuICBnZXRTaGlwcygpIHtcbiAgICByZXR1cm4gc3RhdGUuc2hpcHM7XG4gIH0sXG59KTtcblxuLy8gcmV0dXJucyB0aGUgc2hpcCB0aGF0IGdvdCBoaXRcbmZ1bmN0aW9uIGdldEhpdFNoaXAoc2hpcHMsIGF0dGFja1Bvc2l0aW9uKSB7XG4gIGZvciAoY29uc3Qgc2hpcCBvZiBzaGlwcykge1xuICAgIGlmIChPYmplY3Qua2V5cyhzaGlwLmdldFBvc2l0aW9ucygpKS5pbmNsdWRlcyhTdHJpbmcoYXR0YWNrUG9zaXRpb24pKSkge1xuICAgICAgcmV0dXJuIHNoaXA7XG4gICAgfVxuICB9XG59XG5cbi8vIGNoZWNrcyBhbiBhdHRhY2sgZm9yIGhpdCBvciBtaXNzXG5mdW5jdGlvbiBjaGVja0F0dGFjayhzdGF0ZSwgYXR0YWNrUG9zaXRpb24pIHtcbiAgaWYgKHN0YXRlLnBvc2l0aW9uc1tTdHJpbmcoYXR0YWNrUG9zaXRpb24pXSA9PT0gXCJzaGlwXCIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIGFkZCBjaGVjayBhdHRhY2tcbmNvbnN0IGFkZENoZWNrQXR0YWNrID0gKHN0YXRlKSA9PiAoe1xuICBjaGVja0F0dGFjazogKGF0dGFja1Bvc2l0aW9uKSA9PiBjaGVja0F0dGFjayhzdGF0ZSwgYXR0YWNrUG9zaXRpb24pLFxufSk7XG5cbi8vIG1ldGhvZCBmb3IgcmVjZWlldmVpbmcgYW4gYXR0YWNrXG4vLyBpZiBpdCBoaXRzIHJldHVybnMgdGhlIHNoaXAgdGhhdCBnb3QgaGl0XG5mdW5jdGlvbiByZWNlaXZlQXR0YWNrKHN0YXRlLCBhdHRhY2tQb3NpdGlvbikge1xuICBpZiAoY2hlY2tBdHRhY2soc3RhdGUsIGF0dGFja1Bvc2l0aW9uKSkge1xuICAgIC8vIHN0YXRlLmhpdFNob3RzLnB1c2goU3RyaW5nKGF0dGFja1Bvc2l0aW9uKSk7XG4gICAgY29uc3Qgc2hpcCA9IGdldEhpdFNoaXAoc3RhdGUuc2hpcHMsIGF0dGFja1Bvc2l0aW9uKTtcbiAgICBzaGlwLmhpdChhdHRhY2tQb3NpdGlvbik7XG4gICAgcmV0dXJuIHNoaXA7XG4gIH1cbn1cblxuLy8gYWRkcyByZWNlaXZlQXR0YWNrIG1ldGhvZCB0byBhbiBvYmplY3RcbmNvbnN0IGFkZFJlY2VpdmVBdHRhY2sgPSAoc3RhdGUpID0+ICh7XG4gIHJlY2VpdmVBdHRhY2s6IChhdHRhY2tQb3NpdGlvbikgPT4gcmVjZWl2ZUF0dGFjayhzdGF0ZSwgYXR0YWNrUG9zaXRpb24pLFxufSk7XG5cbi8vIG1ldGhvZCBmb3IgY2hlY2tpbmcgaWYgdGhlIGdhbWUgaXMgb3ZlclxuZnVuY3Rpb24gaXNHYW1lT3ZlcihzdGF0ZSkge1xuICBsZXQgZ2FtZU92ZXIgPSB0cnVlO1xuICBzdGF0ZS5zaGlwcy5mb3JFYWNoKChzaGlwKSA9PiB7XG4gICAgaWYgKCFzaGlwLmlzU3VuaygpKSB7XG4gICAgICBnYW1lT3ZlciA9IGZhbHNlO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBnYW1lT3Zlcjtcbn1cblxuLy8gYWRkIGlzR2FtZU92ZXIgdG8gYW4gb2JqZWN0XG5jb25zdCBhZGRpc0dhbWVPdmVyID0gKHN0YXRlKSA9PiAoe1xuICBpc0dhbWVPdmVyOiAoKSA9PiBpc0dhbWVPdmVyKHN0YXRlKSxcbn0pO1xuXG4vLyBnYW1lIGJvYXJkIGZhY3RvcnkgZnVuY3Rpb25cbmZ1bmN0aW9uIEdhbWVCb2FyZChnYW1lQm9hcmRMZW4pIHtcbiAgLy8gcG9zaXRpb25zIGluIGdhbWUgYm9hcmRcbiAgY29uc3Qgc3RhdGUgPSB7XG4gICAgcG9zaXRpb25zOiB7fSxcbiAgICBzaGlwczogW10sXG4gICAgZ2FtZUJvYXJkTGVuLFxuICB9O1xuXG4gIC8vIHBvcHVsYXRpbmcgdGhlIGdhbWUgYm9hcmRcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBnYW1lQm9hcmRMZW47IGkrKykge1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgZ2FtZUJvYXJkTGVuOyBqKyspIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uc1tTdHJpbmcoW2ksIGpdKV0gPSBcImVtcHR5XCI7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5hZGRHZXRQb3NpdGlvbnMoc3RhdGUpLFxuICAgIC4uLmFkZEdldFNoaXBzKHN0YXRlKSxcbiAgICAuLi5hZGRDcmVhdGVTaGlwKHN0YXRlKSxcbiAgICAuLi5hZGRSZW1vdmVTaGlwKHN0YXRlKSxcbiAgICAuLi5hZGRDaGFuZ2VTaGlwQXhpcyhzdGF0ZSksXG4gICAgLi4uYWRkQ2hlY2tQbGFjZW1lbnQoc3RhdGUpLFxuICAgIC4uLmFkZFJlY2VpdmVBdHRhY2soc3RhdGUpLFxuICAgIC4uLmFkZGlzR2FtZU92ZXIoc3RhdGUpLFxuICAgIC4uLmFkZENoZWNrQXR0YWNrKHN0YXRlKSxcbiAgICAuLi5hZGRHZXRQb3NpdGlvbnNBcm91bmRTaGlwKHN0YXRlKSxcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgR2FtZUJvYXJkO1xuZXhwb3J0IHsgZ2V0SGl0U2hpcCB9O1xuIiwiaW1wb3J0IEdhbWVCb2FyZCBmcm9tIFwiLi9nYW1lQm9hcmRcIjtcbmltcG9ydCBTaGlwIGZyb20gXCIuL3NoaXBzXCI7XG5cbmNvbnN0IGdhbWVCb2FyZExlbiA9IDEwO1xuXG4vLyBpbml0aWFsaXplIHRoZSBhdmFpbGFibGUgc2hvdHNcbmZ1bmN0aW9uIGluaXRpYWxpemVTaG90cyhzdGF0ZSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGdhbWVCb2FyZExlbjsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBnYW1lQm9hcmRMZW47IGorKykge1xuICAgICAgc3RhdGUuYXZhaWxhYmxlU2hvdHMucHVzaChTdHJpbmcoW2ksIGpdKSk7XG4gICAgfVxuICB9XG59XG5cbi8vIGFkZCBnZXRHYW1lQm9hcmQgbWV0aG9kIHRvIGFuIG9iamVjdFxuY29uc3QgYWRkR2V0R2FtZUJvYXJkID0gKHN0YXRlKSA9PiAoe1xuICBnZXRHYW1lQm9hcmQ6ICgpID0+IHN0YXRlLmdhbWVCb2FyZCxcbn0pO1xuXG4vLyBhZGQgZ2V0R2FtZUJvYXJkTGVuIG1ldGhvZCB0byBhbiBvYmplY3RcbmNvbnN0IGFkZEdldEdhbWVCb2FyZExlbiA9IChzdGF0ZSkgPT4gKHtcbiAgZ2V0R2FtZUJvYXJkTGVuOiAoKSA9PiBzdGF0ZS5nYW1lQm9hcmRMZW4sXG59KTtcblxuLy8gbWV0aG9kIGZvciBjcmVhdGluZyB0aGUgc2hpcFxuZnVuY3Rpb24gY3JlYXRlU2hpcChzdGF0ZSwgY3JlYXRlUG9zLCBsZW4sIGF4aXMpIHtcbiAgcmV0dXJuIHN0YXRlLmdhbWVCb2FyZC5jcmVhdGVTaGlwKGNyZWF0ZVBvcywgbGVuLCBheGlzKTtcbn1cblxuLy8gYWRkIGNyZWF0ZVNoaXAgdG8gdGhlIHBsYXllclxuY29uc3QgYWRkQ3JlYXRlU2hpcCA9IChzdGF0ZSkgPT4gKHtcbiAgY3JlYXRlU2hpcDogKGNyZWF0ZVBvcywgbGVuLCBheGlzKSA9PiBjcmVhdGVTaGlwKHN0YXRlLCBjcmVhdGVQb3MsIGxlbiwgYXhpcyksXG59KTtcblxuLy8gbWV0aG9kIGZvciBjaGVja2luZyB0aGUgc2hpcCBwbGFjZW1lbnQgdmFsaWRpdHlcbmZ1bmN0aW9uIGNoZWNrUGxhY2VtZW50KHN0YXRlLCBjcmVhdGVQb3MsIGxlbiwgYXhpcykge1xuICByZXR1cm4gc3RhdGUuZ2FtZUJvYXJkLmNoZWNrUGxhY2VtZW50KGNyZWF0ZVBvcywgbGVuLCBheGlzKTtcbn1cblxuLy8gYWRkIGNyZWF0ZVNoaXAgdG8gdGhlIHBsYXllclxuY29uc3QgYWRkQ2hlY2tQbGFjZW1lbnQgPSAoc3RhdGUpID0+ICh7XG4gIGNoZWNrUGxhY2VtZW50OiAoY3JlYXRlUG9zLCBsZW4sIGF4aXMpID0+XG4gICAgY2hlY2tQbGFjZW1lbnQoc3RhdGUsIGNyZWF0ZVBvcywgbGVuLCBheGlzKSxcbn0pO1xuXG4vLyBtZXRob2QgZm9yIHJlbW92aW5nIGEgc2hpcFxuZnVuY3Rpb24gcmVtb3ZlU2hpcChzdGF0ZSwgc2hpcCkge1xuICBzdGF0ZS5nYW1lQm9hcmQucmVtb3ZlU2hpcChzaGlwKTtcbn1cblxuLy8gYWRkIHJlbW92ZVNoaXAgdG8gdGhlIHBsYXllclxuY29uc3QgYWRkUmVtb3ZlU2hpcCA9IChzdGF0ZSkgPT4gKHtcbiAgcmVtb3ZlU2hpcDogKHNoaXApID0+IHtcbiAgICByZW1vdmVTaGlwKHN0YXRlLCBzaGlwKTtcbiAgfSxcbn0pO1xuXG4vLyBtZXRob2QgZm9yIHJlbW92aW5nIGEgc2hpcFxuZnVuY3Rpb24gY2hhbmdlU2hpcEF4aXMoc3RhdGUsIHNoaXApIHtcbiAgcmV0dXJuIHN0YXRlLmdhbWVCb2FyZC5jaGFuZ2VTaGlwQXhpcyhzaGlwKTtcbn1cblxuLy8gYWRkIHJlbW92ZVNoaXAgdG8gdGhlIHBsYXllclxuY29uc3QgYWRkQ2hhbmdlU2hpcEF4aXMgPSAoc3RhdGUpID0+ICh7XG4gIGNoYW5nZVNoaXBBeGlzOiAoc2hpcCkgPT4gY2hhbmdlU2hpcEF4aXMoc3RhdGUsIHNoaXApLFxufSk7XG5cbi8vIHJldHVybnMgYSByYW5kb20gYXhpcyA6ICd4JyBvciAneSdcbmZ1bmN0aW9uIGdldFJhbmRvbUF4aXMoKSB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApICUgMiA9PT0gMCA/IFwieFwiIDogXCJ5XCI7XG59XG5cbi8vIHJldHVybnMgYSByYW5kb20gcG9zaXRpb25cbmZ1bmN0aW9uIGdldFJhbmRvbVBvc2l0aW9uKGFsbFBvc2l0aW9ucykge1xuICBjb25zdCByYW5kb21Qb3MgPVxuICAgIGFsbFBvc2l0aW9uc1tNYXRoLmZsb29yKGFsbFBvc2l0aW9ucy5sZW5ndGggKiBNYXRoLnJhbmRvbSgpKV07XG4gIHJldHVybiByYW5kb21Qb3M7XG59XG5cbi8vIG1ldGhvZCByZXR1cm5zIGEgU2hpcCB3aXRoIHJhbmRvbSBjcmVhdGUgbG9jYXRpb24gYW5kIGF4aXMgIGFuZCBnaXZlbiBsZW5ndGhcbmZ1bmN0aW9uIGdldFJhbmRvbVNoaXAoc3RhdGUsIGxlbikge1xuICBjb25zdCBhbGxQb3NpdGlvbnMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBnYW1lQm9hcmRMZW47IGkrKykge1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgZ2FtZUJvYXJkTGVuOyBqKyspIHtcbiAgICAgIGFsbFBvc2l0aW9ucy5wdXNoKFtpLCBqXSk7XG4gICAgfVxuICB9XG4gIHdoaWxlICh0cnVlKSB7XG4gICAgY29uc3QgcmFuZG9tUG9zID0gZ2V0UmFuZG9tUG9zaXRpb24oYWxsUG9zaXRpb25zKTtcbiAgICBjb25zdCByYW5kb21BeGlzID0gZ2V0UmFuZG9tQXhpcygpO1xuICAgIGlmIChjaGVja1BsYWNlbWVudChzdGF0ZSwgcmFuZG9tUG9zLCBsZW4sIHJhbmRvbUF4aXMpKSB7XG4gICAgICByZXR1cm4gU2hpcChyYW5kb21Qb3MsIGxlbiwgcmFuZG9tQXhpcyk7XG4gICAgfVxuICAgIGNvbnN0IG90aGVyQXhpcyA9IHJhbmRvbUF4aXMgPT09IFwieFwiID8gXCJ5XCIgOiBcInhcIjtcbiAgICBpZiAoY2hlY2tQbGFjZW1lbnQoc3RhdGUsIHJhbmRvbVBvcywgbGVuLCBvdGhlckF4aXMpKSB7XG4gICAgICByZXR1cm4gU2hpcChyYW5kb21Qb3MsIGxlbiwgb3RoZXJBeGlzKTtcbiAgICB9XG4gICAgYWxsUG9zaXRpb25zLnNwbGljZShhbGxQb3NpdGlvbnMuaW5kZXhPZihyYW5kb21Qb3MpLCAxKTtcbiAgfVxufVxuXG4vLyBhZGQgZ2V0UmFuZG9tU2hpcCB0byBwbGF5ZXJcbmNvbnN0IGFkZEdldFJhbmRvbVNoaXAgPSAoc3RhdGUpID0+ICh7XG4gIGdldFJhbmRvbVNoaXA6IChsZW4pID0+IGdldFJhbmRvbVNoaXAoc3RhdGUsIGxlbiksXG59KTtcblxuZnVuY3Rpb24gY2xlYXIoc3RhdGUpIHtcbiAgY29uc3Qgc2hpcHMgPSBbLi4uc3RhdGUuZ2FtZUJvYXJkLmdldFNoaXBzKCldO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgc3RhdGUuZ2FtZUJvYXJkLnJlbW92ZVNoaXAoc2hpcHNbaV0pO1xuICB9XG59XG5cbmNvbnN0IGFkZENsZWFyID0gKHN0YXRlKSA9PiAoe1xuICBjbGVhcjogKCkgPT4ge1xuICAgIGNsZWFyKHN0YXRlKTtcbiAgfSxcbn0pO1xuXG4vLyBhZGQgYWRkR2V0QXZhaWxhYmxlU2hvdHMgbWV0aG9kIHRvIGFuIG9iamVjdFxuY29uc3QgYWRkR2V0QXZhaWxhYmxlU2hvdHMgPSAoc3RhdGUpID0+ICh7XG4gIGdldEF2YWlsYWJsZVNob3RzOiAoKSA9PiBzdGF0ZS5hdmFpbGFibGVTaG90cyxcbn0pO1xuXG4vLyBhdHRhY2sgbWV0aG9kIGZvciBhIHBsYXllciB0byBhdHRhY2sgYW5vdGhlciBwbGF5ZXIgZ2FtZSBib2FyZFxuLy8gcmV0dXJucyBzaGlwXG5mdW5jdGlvbiBhdHRhY2soc3RhdGUsIG9wb25lbnRCb2FyZCwgcG9zaXRpb24pIHtcbiAgY29uc3QgcG9zaXRpb25JbmRleCA9IHN0YXRlLmF2YWlsYWJsZVNob3RzLmluZGV4T2YoU3RyaW5nKHBvc2l0aW9uKSk7XG4gIHN0YXRlLmF2YWlsYWJsZVNob3RzLnNwbGljZShwb3NpdGlvbkluZGV4LCAxKTtcbiAgY29uc3Qgc2hpcCA9IG9wb25lbnRCb2FyZC5yZWNlaXZlQXR0YWNrKHBvc2l0aW9uKTtcbiAgLy8gaWYgaXQgaGl0IGEgc2hpcFxuICBpZiAoc2hpcCkge1xuICAgIC8vIGlmIHNoaXAgc3Vua1xuICAgIGlmIChzaGlwLmlzU3VuaygpKSB7XG4gICAgICBjb25zdCBwb3NpdGlvbnMgPSBvcG9uZW50Qm9hcmQuZ2V0UG9zaXRpb25zQXJvdW5kU2hpcChzaGlwKTtcbiAgICAgIHBvc2l0aW9ucy5mb3JFYWNoKChwKSA9PiB7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uSW5kZXggPSBzdGF0ZS5hdmFpbGFibGVTaG90cy5pbmRleE9mKFN0cmluZyhwKSk7XG4gICAgICAgIGlmIChwb3NpdGlvbkluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIHN0YXRlLmF2YWlsYWJsZVNob3RzLnNwbGljZShwb3NpdGlvbkluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzaGlwO1xufVxuXG4vLyBhZGQgYXR0YWNrIG1ldGhvZCB0byBhbiBvYmplY3RcbmNvbnN0IGFkZEF0dGFjayA9IChzdGF0ZSkgPT4gKHtcbiAgYXR0YWNrOiAob3BvbmVudEJvYXJkLCBwb3NpdGlvbikgPT4gYXR0YWNrKHN0YXRlLCBvcG9uZW50Qm9hcmQsIHBvc2l0aW9uKSxcbn0pO1xuXG4vLyBjaG9vc2UgYSByYW5kb20gZWxlbWVudCBmcm9tIGFycmF5XG5mdW5jdGlvbiByYW5kb21FbGVtZW50KGFycmF5KSB7XG4gIGNvbnN0IGxlbiA9IGFycmF5Lmxlbmd0aDtcbiAgY29uc3QgaSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxlbik7XG4gIHJldHVybiBhcnJheVtpXTtcbn1cblxuLy8gbWV0aG9kIGZvciBhaSB0byBjaG9vc2UgYW4gYXR0YWNrIHBvc2l0aW9uXG5mdW5jdGlvbiBnZXRBdHRhY2tQb3NpdGlvbihzdGF0ZSkge1xuICByZXR1cm4gcmFuZG9tRWxlbWVudChzdGF0ZS5hdmFpbGFibGVTaG90cyk7XG59XG5cbi8vIGFkZCBnZXRBdHRhY2tQb3NpdGlvbiBtZXRob2QgdG8gYW4gb2JqZWN0XG5jb25zdCBhZGRHZXRBdHRhY2tQb3NpdGlvbiA9IChzdGF0ZSkgPT4gKHtcbiAgZ2V0QXR0YWNrUG9zaXRpb246ICgpID0+IGdldEF0dGFja1Bvc2l0aW9uKHN0YXRlKSxcbn0pO1xuXG4vLyBmYWN0b3J5IGZ1bmN0aW9uIGZvciBodW1hbiBQbGF5ZXJcbmZ1bmN0aW9uIFBsYXllcigpIHtcbiAgY29uc3Qgc3RhdGUgPSB7XG4gICAgZ2FtZUJvYXJkOiBHYW1lQm9hcmQoZ2FtZUJvYXJkTGVuKSxcbiAgICBnYW1lQm9hcmRMZW4sXG4gICAgYXZhaWxhYmxlU2hvdHM6IFtdLFxuICB9O1xuXG4gIGluaXRpYWxpemVTaG90cyhzdGF0ZSk7XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5hZGRHZXRHYW1lQm9hcmQoc3RhdGUpLFxuICAgIC4uLmFkZEdldEdhbWVCb2FyZExlbihzdGF0ZSksXG4gICAgLi4uYWRkQ3JlYXRlU2hpcChzdGF0ZSksXG4gICAgLi4uYWRkQ2hlY2tQbGFjZW1lbnQoc3RhdGUpLFxuICAgIC4uLmFkZFJlbW92ZVNoaXAoc3RhdGUpLFxuICAgIC4uLmFkZENoYW5nZVNoaXBBeGlzKHN0YXRlKSxcbiAgICAuLi5hZGRHZXRSYW5kb21TaGlwKHN0YXRlKSxcbiAgICAuLi5hZGRDbGVhcihzdGF0ZSksXG4gICAgLi4uYWRkR2V0QXZhaWxhYmxlU2hvdHMoc3RhdGUpLFxuICAgIC4uLmFkZEF0dGFjayhzdGF0ZSksXG4gIH07XG59XG5cbi8vIGZhY3RvcnkgZnVuY3Rpb24gZm9yIGFpIFBsYXllclxuZnVuY3Rpb24gQWlQbGF5ZXIoKSB7XG4gIGNvbnN0IHN0YXRlID0ge1xuICAgIGdhbWVCb2FyZDogR2FtZUJvYXJkKGdhbWVCb2FyZExlbiksXG4gICAgZ2FtZUJvYXJkTGVuLFxuICAgIGF2YWlsYWJsZVNob3RzOiBbXSxcbiAgfTtcblxuICBpbml0aWFsaXplU2hvdHMoc3RhdGUpO1xuXG4gIHJldHVybiB7XG4gICAgLi4uYWRkR2V0R2FtZUJvYXJkKHN0YXRlKSxcbiAgICAuLi5hZGRHZXRHYW1lQm9hcmRMZW4oc3RhdGUpLFxuICAgIC4uLmFkZENyZWF0ZVNoaXAoc3RhdGUpLFxuICAgIC4uLmFkZENoZWNrUGxhY2VtZW50KHN0YXRlKSxcbiAgICAuLi5hZGRSZW1vdmVTaGlwKHN0YXRlKSxcbiAgICAuLi5hZGRDaGFuZ2VTaGlwQXhpcyhzdGF0ZSksXG4gICAgLi4uYWRkR2V0UmFuZG9tU2hpcChzdGF0ZSksXG4gICAgLi4uYWRkQ2xlYXIoc3RhdGUpLFxuICAgIC4uLmFkZEdldEF2YWlsYWJsZVNob3RzKHN0YXRlKSxcbiAgICAuLi5hZGRBdHRhY2soc3RhdGUpLFxuICAgIC4uLmFkZEdldEF0dGFja1Bvc2l0aW9uKHN0YXRlKSxcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgUGxheWVyO1xuZXhwb3J0IHsgZ2FtZUJvYXJkTGVuLCBBaVBsYXllciwgZ2V0UmFuZG9tQXhpcyB9O1xuIiwiaW1wb3J0IHsgZ2FtZUJvYXJkTGVuIGFzIGxlbiB9IGZyb20gXCIuL3BsYXllclwiO1xuXG4vLyByZXR1cm5zIGEgcG9wdWxhdGVkIGRpdiB3ZSB1c2UgYXMgYm9hcmQgZm9yIHBsYWNpbmcgc2hpcCBpblxuZnVuY3Rpb24gcG9wdWxhdGVkU2V0dXBCb2FyZCgpIHtcbiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHBvc2l0aW9uRGl2LmNsYXNzTGlzdC5hZGQoXCJwb3NpdGlvblwiLCBgcC0ke2l9LSR7an1gKTtcbiAgICAgIGRpdi5hcHBlbmRDaGlsZChwb3NpdGlvbkRpdik7XG4gICAgfVxuICB9XG4gIGRpdi5jbGFzc0xpc3QuYWRkKFwiZ2FtZS1ib2FyZFwiKTtcbiAgcmV0dXJuIGRpdjtcbn1cblxuLy8gYWRkcyBldmVudCB0byBjbGljayBvbiBlYWNoIGVsZW1lbnQgb2YgYm9hcmQgZGl2XG5mdW5jdGlvbiBhZGRFdmVudFRvQm9hcmQoYm9hcmREaXYsIGNiKSB7XG4gIFsuLi5ib2FyZERpdi5jaGlsZHJlbl0uZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNiKTtcbiAgfSk7XG59XG5cbi8vIG1hcmtzIGEgc2hpcCBvbiBib2FyZFxuZnVuY3Rpb24gbWFya1NoaXBPbkJvYXJkKHNoaXBQb3NpdGlvbnMsIGJvYXJkRGl2KSB7XG4gIHNoaXBQb3NpdGlvbnMuZm9yRWFjaCgocCkgPT4ge1xuICAgIGNvbnN0IHNlbGVjdG9yID0gYC5wLSR7U3RyaW5nKHApLnJlcGxhY2UoXCIsXCIsIFwiLVwiKX1gO1xuICAgIGNvbnN0IGRvbSA9IGJvYXJkRGl2LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIGRvbS5jbGFzc0xpc3QuYWRkKFwic2hpcFwiKTtcbiAgfSk7XG59XG5cbi8vIHJlbW92ZXMgYSBzaGlwIGZyb20gYm9hcmRcbmZ1bmN0aW9uIHJlbW92ZVNoaXBGcm9tQm9hcmQoc2hpcFBvc2l0aW9ucywgYm9hcmREaXYpIHtcbiAgc2hpcFBvc2l0aW9ucy5mb3JFYWNoKChwKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0b3IgPSBgLnAtJHtTdHJpbmcocCkucmVwbGFjZShcIixcIiwgXCItXCIpfWA7XG4gICAgY29uc3QgZG9tID0gYm9hcmREaXYucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgZG9tLmNsYXNzTGlzdC5yZW1vdmUoXCJzaGlwXCIpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gY2xlYXJCb2FyZERpdihib2FyZERpdikge1xuICBbLi4uYm9hcmREaXYuY2hpbGRyZW5dLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJzaGlwXCIsIFwic2VsZWN0ZWRcIik7XG4gIH0pO1xufVxuXG5leHBvcnQge1xuICBwb3B1bGF0ZWRTZXR1cEJvYXJkLFxuICBhZGRFdmVudFRvQm9hcmQsXG4gIG1hcmtTaGlwT25Cb2FyZCxcbiAgcmVtb3ZlU2hpcEZyb21Cb2FyZCxcbiAgY2xlYXJCb2FyZERpdixcbn07XG4iLCJpbXBvcnQgeyBnYW1lQm9hcmRMZW4gfSBmcm9tIFwiLi9wbGF5ZXJcIjtcblxuLy8gYWRkcyBhIGNsYXNzIHRvIGdpdmVuIHBvc2l0aW9ucyBvZiBnYW1lIGJhb3JkIGRpdlxuZnVuY3Rpb24gbWFya0JvYXJkRGl2KGJvYXJkRGl2LCBwb3NpdGlvbnMsIG1hcmspIHtcbiAgZm9yIChjb25zdCBwb3NpdGlvbiBvZiBwb3NpdGlvbnMpIHtcbiAgICBjb25zdCBbaSwgal0gPSBTdHJpbmcocG9zaXRpb24pLnNwbGl0KFwiLFwiKTtcbiAgICBbLi4uYm9hcmREaXYuY2hpbGRyZW5dWytpICogZ2FtZUJvYXJkTGVuICsgK2pdLmNsYXNzTGlzdC5hZGQobWFyayk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbWFya0JvYXJkRGl2O1xuIiwiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWN5Y2xlICovXG5pbXBvcnQgbWFya0JvYXJkRGl2IGZyb20gXCIuL2dhbWUtZG9tXCI7XG5pbXBvcnQgeyBnYW1lQm9hcmRMZW4gfSBmcm9tIFwiLi9wbGF5ZXJcIjtcbmltcG9ydCBpbml0aWFsaXplU2V0dXAgZnJvbSBcIi4vc2V0dXBcIjtcblxuLy8gZ2V0cyB0aGUgaW5kZXggb2YgcG9zaXRpb24gZGl2IGluIGJvYXJkIGRpdiBmcm9tIGEgZ2l2ZW4gcG9zaXRpb25cbmZ1bmN0aW9uIGdldEluZGV4T2Zwb3NpdGlvbihwb3NpdGlvbikge1xuICBjb25zdCBbaSwgal0gPSBTdHJpbmcocG9zaXRpb24pLnNwbGl0KFwiLFwiKTtcbiAgcmV0dXJuICtpICogZ2FtZUJvYXJkTGVuICsgK2o7XG59XG5cbi8vIHRvIGFubm91bmNlIHdpbm5lciBhbmQgYXNrIGZvciBwbGF5IGFnYWluXG5mdW5jdGlvbiBnYW1lT3ZlcihtZXNzYWdlKSB7XG4gIGNvbnN0IGdhbWVPdmVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICBjb25zdCBtZXNzYWdlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgbWVzc2FnZURpdi50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG5cbiAgY29uc3QgcGxheUFnYWluQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgcGxheUFnYWluQnV0dG9uLnRleHRDb250ZW50ID0gXCJwbGF5IGFnYWluXCI7XG5cbiAgZ2FtZU92ZXJEaXYuYXBwZW5kQ2hpbGQobWVzc2FnZURpdik7XG4gIGdhbWVPdmVyRGl2LmFwcGVuZENoaWxkKHBsYXlBZ2FpbkJ1dHRvbik7XG5cbiAgcmV0dXJuIGdhbWVPdmVyRGl2O1xufVxuXG4vLyBhaSBhdHRhY2tzIGFmdGVyIHRoZSBwbGF5ZXIgYXR0YWNrXG5mdW5jdGlvbiBhaUF0dGFjayhhaVBsYXllciwgcGxheWVyQm9hcmQsIHBsYXllckJvYXJkRGl2LCBhaUJvYXJkRGl2LCBtYWluRGl2KSB7XG4gIGNvbnN0IGFpQXR0YWNrUG9zaXRpb24gPSBhaVBsYXllci5nZXRBdHRhY2tQb3NpdGlvbigpO1xuICBjb25zdCBzaGlwID0gYWlQbGF5ZXIuYXR0YWNrKHBsYXllckJvYXJkLCBhaUF0dGFja1Bvc2l0aW9uKTtcbiAgY29uc3QgcG9zaXRpb25EaXYgPSBbLi4ucGxheWVyQm9hcmREaXYuY2hpbGRyZW5dW1xuICAgIGdldEluZGV4T2Zwb3NpdGlvbihhaUF0dGFja1Bvc2l0aW9uKVxuICBdO1xuICBpZiAoc2hpcCkge1xuICAgIC8vIGl0IHdhcyBhIGhpdFxuICAgIHBvc2l0aW9uRGl2LmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XG4gICAgaWYgKHNoaXAuaXNTdW5rKCkpIHtcbiAgICAgIC8vIGl0IHN1bmsgYSBzaGlwXG4gICAgICBjb25zdCBhcnJvdW5kUG9zaXRpb25zID0gcGxheWVyQm9hcmQuZ2V0UG9zaXRpb25zQXJvdW5kU2hpcChzaGlwKTtcbiAgICAgIG1hcmtCb2FyZERpdihwbGF5ZXJCb2FyZERpdiwgYXJyb3VuZFBvc2l0aW9ucywgXCJpbnZhbGlkXCIpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBpdCB3YXMgYSBtaXNzXG4gICAgcG9zaXRpb25EaXYuY2xhc3NMaXN0LmFkZChcIm1pc3NcIik7XG4gIH1cblxuICBpZiAocGxheWVyQm9hcmQuaXNHYW1lT3ZlcigpKSB7XG4gICAgY29uc3QgZ2FtZU92ZXJEaXYgPSBnYW1lT3ZlcihcInlvdSBsb3N0IVwiKTtcbiAgICBhaUJvYXJkRGl2LmNsYXNzTGlzdC5hZGQoXCJmaW5pc2hlZFwiKTtcbiAgICBtYWluRGl2LmFwcGVuZENoaWxkKGdhbWVPdmVyRGl2KTtcbiAgICBjb25zdCBwbGF5QWdhaW5CdXR0b24gPSBnYW1lT3ZlckRpdi5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uXCIpO1xuICAgIHBsYXlBZ2FpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgbWFpbkRpdi5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgaW5pdGlhbGl6ZVNldHVwKG1haW5EaXYpO1xuICAgIH0pO1xuICB9XG59XG5cbi8vIGV2ZW50IGZvciB3aGVuIHBsYXllciBhdHRhY2tzIGFpIGJvYXJkXG5mdW5jdGlvbiBwbGF5ZXJBdHRhY2soXG4gIHBvc2l0aW9uLFxuICBodW1hblBsYXllcixcbiAgYWlQbGF5ZXIsXG4gIHBsYXllckJvYXJkLFxuICBhaUJvYXJkLFxuICBhaUJvYXJkRGl2LFxuICBwbGF5ZXJCb2FyZERpdixcbiAgcG9zaXRpb25EaXYsXG4gIG1haW5EaXZcbikge1xuICBjb25zdCBzaGlwID0gaHVtYW5QbGF5ZXIuYXR0YWNrKGFpQm9hcmQsIHBvc2l0aW9uKTtcbiAgaWYgKHNoaXApIHtcbiAgICAvLyBpdCB3YXMgYSBoaXRcbiAgICBwb3NpdGlvbkRpdi5jbGFzc0xpc3QuYWRkKFwiaGl0XCIpO1xuICAgIGlmIChzaGlwLmlzU3VuaygpKSB7XG4gICAgICAvLyBpdCBzdW5rIGEgc2hpcFxuICAgICAgY29uc3QgYXJyb3VuZFBvc2l0aW9ucyA9IGFpQm9hcmQuZ2V0UG9zaXRpb25zQXJvdW5kU2hpcChzaGlwKTtcbiAgICAgIG1hcmtCb2FyZERpdihhaUJvYXJkRGl2LCBhcnJvdW5kUG9zaXRpb25zLCBcImludmFsaWRcIik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIGl0IHdhcyBhIG1pc3NcbiAgICBwb3NpdGlvbkRpdi5jbGFzc0xpc3QuYWRkKFwibWlzc1wiKTtcbiAgfVxuXG4gIGlmIChhaUJvYXJkLmlzR2FtZU92ZXIoKSkge1xuICAgIGNvbnN0IGdhbWVPdmVyRGl2ID0gZ2FtZU92ZXIoXCJ5b3Ugd29uIVwiKTtcbiAgICBhaUJvYXJkRGl2LmNsYXNzTGlzdC5hZGQoXCJmaW5pc2hlZFwiKTtcbiAgICBtYWluRGl2LmFwcGVuZENoaWxkKGdhbWVPdmVyRGl2KTtcbiAgICBjb25zdCBwbGF5QWdhaW5CdXR0b24gPSBnYW1lT3ZlckRpdi5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uXCIpO1xuICAgIHBsYXlBZ2FpbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgbWFpbkRpdi5pbm5lckhUTUwgPSBcIlwiO1xuICAgICAgaW5pdGlhbGl6ZVNldHVwKG1haW5EaXYpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGFpQXR0YWNrKGFpUGxheWVyLCBwbGF5ZXJCb2FyZCwgcGxheWVyQm9hcmREaXYsIGFpQm9hcmREaXYsIG1haW5EaXYpO1xuICB9XG59XG5cbi8vIG1haW4gZ2FtZSBwbGF5IGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiBnYW1lIHN0YXJ0c1xuZnVuY3Rpb24gbWFpbihtYWluRGl2LCBodW1hblBsYXllciwgYWlQbGF5ZXIsIHBsYXllckJvYXJkRGl2LCBhaUJvYXJkRGl2KSB7XG4gIGNvbnN0IGJvYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGJvYXJkc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiYm9hcmRzLWNvbnRhaW5lclwiKTtcbiAgYm9hcmRzQ29udGFpbmVyLmFwcGVuZENoaWxkKHBsYXllckJvYXJkRGl2KTtcbiAgYm9hcmRzQ29udGFpbmVyLmFwcGVuZENoaWxkKGFpQm9hcmREaXYpO1xuXG4gIGNvbnN0IGFpUG9zdGlvbnNEaXZzID0gWy4uLmFpQm9hcmREaXYuY2hpbGRyZW5dO1xuICAvLyBhZGRpbmcgZXZlbnQgbGlzdGVuZXIgdG8gZWFjaCBwb3NpdGlvbiBkaXYgaW4gYWkgYm9hcmQgZGl2XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZ2FtZUJvYXJkTGVuOyBpKyspIHtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGdhbWVCb2FyZExlbjsgaisrKSB7XG4gICAgICBhaVBvc3Rpb25zRGl2c1tpICogZ2FtZUJvYXJkTGVuICsgal0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uRGl2ID0gZS50YXJnZXQ7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gW2ksIGpdO1xuICAgICAgICBwbGF5ZXJBdHRhY2soXG4gICAgICAgICAgcG9zaXRpb24sXG4gICAgICAgICAgaHVtYW5QbGF5ZXIsXG4gICAgICAgICAgYWlQbGF5ZXIsXG4gICAgICAgICAgaHVtYW5QbGF5ZXIuZ2V0R2FtZUJvYXJkKCksXG4gICAgICAgICAgYWlQbGF5ZXIuZ2V0R2FtZUJvYXJkKCksXG4gICAgICAgICAgYWlCb2FyZERpdixcbiAgICAgICAgICBwbGF5ZXJCb2FyZERpdixcbiAgICAgICAgICBwb3NpdGlvbkRpdixcbiAgICAgICAgICBtYWluRGl2XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgbWFpbkRpdi5hcHBlbmRDaGlsZChib2FyZHNDb250YWluZXIpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBtYWluO1xuZXhwb3J0IHsgcGxheWVyQXR0YWNrLCBhaUF0dGFjayB9O1xuIiwiaW1wb3J0IG1hcmtCb2FyZERpdiBmcm9tIFwiLi9nYW1lLWRvbVwiO1xuaW1wb3J0IHsgZ2V0SGl0U2hpcCB9IGZyb20gXCIuL2dhbWVCb2FyZFwiO1xuaW1wb3J0IHsgZ2FtZUJvYXJkTGVuIH0gZnJvbSBcIi4vcGxheWVyXCI7XG5pbXBvcnQgeyBwcmVkaWN0U2hpcFBvc2l0aW9ucyB9IGZyb20gXCIuL3NoaXBzXCI7XG5cbmxldCBzZWxlY3RlZFNoaXA7XG4vLyBhY3RpdmF0ZXMgdGhlIGJvYXJkIGZvciBtb3ZpbmcgYXJvdW5kIHNoaXAgaW4gaXRcbmZ1bmN0aW9uIGJvYXJkQWN0aXZhdGUoYm9hcmREaXYsIGdhbWVCb2FyZCkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGdhbWVCb2FyZExlbjsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBnYW1lQm9hcmRMZW47IGorKykge1xuICAgICAgY29uc3QgcG9zaXRpb25EaXYgPSBbLi4uYm9hcmREaXYuY2hpbGRyZW5dW2kgKiBnYW1lQm9hcmRMZW4gKyBqXTtcbiAgICAgIHBvc2l0aW9uRGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICBpZiAoIXNlbGVjdGVkU2hpcCkge1xuICAgICAgICAgIC8vIGlmIGEgc2hpcCBpc24ndCBhbHJlYWR5IHNsZWN0ZWRcbiAgICAgICAgICBpZiAoZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikuaW5jbHVkZXMoXCJzaGlwXCIpKSB7XG4gICAgICAgICAgICAvLyBpZiBwbGF5ZXIgY2xpY2tlZCBvbiBhIHNoaXBcbiAgICAgICAgICAgIHNlbGVjdGVkU2hpcCA9IGdldEhpdFNoaXAoZ2FtZUJvYXJkLmdldFNoaXBzKCksIFtpLCBqXSk7XG4gICAgICAgICAgICBnYW1lQm9hcmQucmVtb3ZlU2hpcChzZWxlY3RlZFNoaXApO1xuICAgICAgICAgICAgY29uc3Qgc2hpcFBvc2l0aW9ucyA9IHByZWRpY3RTaGlwUG9zaXRpb25zKFxuICAgICAgICAgICAgICBzZWxlY3RlZFNoaXAuZ2V0Q3JlYXRlUG9zKCksXG4gICAgICAgICAgICAgIHNlbGVjdGVkU2hpcC5nZXRMZW4oKSxcbiAgICAgICAgICAgICAgc2VsZWN0ZWRTaGlwLmdldEF4aXMoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG1hcmtCb2FyZERpdihib2FyZERpdiwgc2hpcFBvc2l0aW9ucywgXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gYSBzaGlwIGlzIGFscmVhZHkgc2VsZWN0ZWRcbiAgICAgICAgICBpZiAoZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikuaW5jbHVkZXMoXCJzaGlwXCIpKSB7XG4gICAgICAgICAgICAvLyBpZiBwbGF5ZXIgY2xpY2tlZCBvbiBhIHNoaXBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVTZWxlY3RlZFNoaXAoKSB7XG4gIHNlbGVjdGVkU2hpcCA9IHVuZGVmaW5lZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYm9hcmRBY3RpdmF0ZTtcbmV4cG9ydCB7IHJlbW92ZVNlbGVjdGVkU2hpcCB9O1xuIiwiaW1wb3J0IHsgcHJlZGljdFNoaXBQb3NpdGlvbnMgfSBmcm9tIFwiLi9zaGlwc1wiO1xuaW1wb3J0IHtcbiAgbWFya1NoaXBPbkJvYXJkLFxuICByZW1vdmVTaGlwRnJvbUJvYXJkLFxuICBwb3B1bGF0ZWRTZXR1cEJvYXJkLFxuICBjbGVhckJvYXJkRGl2LFxufSBmcm9tIFwiLi9zZXR1cC1kb21cIjtcbmltcG9ydCBQbGF5ZXIsIHsgQWlQbGF5ZXIgfSBmcm9tIFwiLi9wbGF5ZXJcIjtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBpbXBvcnQvbm8tY3ljbGVcbmltcG9ydCBtYWluIGZyb20gXCIuL2dhbWVQbGF5XCI7XG5pbXBvcnQgYm9hcmRBY3RpdmF0ZSwgeyByZW1vdmVTZWxlY3RlZFNoaXAgfSBmcm9tIFwiLi9zaGlwLXBsYWNlbWVudFwiO1xuXG4vLyBzaGlwcyB0byBiZSBjcmVhdGVkIGxlblxuY29uc3Qgc2hpcHNMZW5naHRzID0gWzQsIDMsIDMsIDIsIDIsIDIsIDEsIDEsIDEsIDFdO1xuXG4vLyBjcmVhdGVzIGEgc2hpcCBvbiBib2FyZCBkaXYgYW5kIGluIHBsYXllcnMgYm9hcmQgb2JqZWN0XG5mdW5jdGlvbiBjcmVhdGVTaGlwKHBsYXllciwgYm9hcmREaXYsIGNyZWF0ZVBvcywgbGVuLCBheGlzKSB7XG4gIGNvbnN0IHNoaXAgPSBwbGF5ZXIuY3JlYXRlU2hpcChjcmVhdGVQb3MsIGxlbiwgYXhpcyk7XG4gIGNvbnN0IHNoaXBQb3NpdGlvbnMgPSBwcmVkaWN0U2hpcFBvc2l0aW9ucyhjcmVhdGVQb3MsIGxlbiwgYXhpcyk7XG4gIG1hcmtTaGlwT25Cb2FyZChzaGlwUG9zaXRpb25zLCBib2FyZERpdik7XG4gIHJldHVybiBzaGlwO1xufVxuXG4vLyByZW1vdmVzIGEgc2hpcCBmcm9tIGJvYXJkIGRpdiBhbmQgZnJvbSBwbGF5ZXIncyBib2FyZCBvYmplY3RcbmZ1bmN0aW9uIHJlbW92ZVNoaXAoc2hpcCwgcGxheWVyLCBib2FyZERpdikge1xuICBwbGF5ZXIucmVtb3ZlU2hpcChzaGlwKTtcbiAgY29uc3Qgc2hpcFBvc2l0aW9ucyA9IHByZWRpY3RTaGlwUG9zaXRpb25zKFxuICAgIHNoaXAuZ2V0Q3JlYXRlUG9zKCksXG4gICAgc2hpcC5nZXRMZW4oKSxcbiAgICBzaGlwLmdldEF4aXMoKVxuICApO1xuICByZW1vdmVTaGlwRnJvbUJvYXJkKHNoaXBQb3NpdGlvbnMsIGJvYXJkRGl2KTtcbn1cblxuLy8gY2hhbmdlcyBhIHNoaXAgYXhpcyBpbiBib2FyZCBkaXYgYW5kIGluIHBsYXllcidzIGJvYXJkIG9iamVjdCBpZiBwb3NzaWJsZVxuZnVuY3Rpb24gY2hhbmdlU2hpcEF4aXMoc2hpcCwgcGxheWVyLCBib2FyZERpdikge1xuICByZW1vdmVTaGlwKHNoaXAsIHBsYXllciwgYm9hcmREaXYpO1xuICBjb25zdCBjcmVhdGVQb3MgPSBzaGlwLmdldENyZWF0ZVBvcygpO1xuICBjb25zdCBsZW4gPSBzaGlwLmdldExlbigpO1xuICBjb25zdCBvbGRBeGlzID0gc2hpcC5nZXRBeGlzKCk7XG4gIGNvbnN0IG5ld0F4aXMgPSBvbGRBeGlzID09PSBcInhcIiA/IFwieVwiIDogXCJ4XCI7XG4gIGlmIChwbGF5ZXIuY2hlY2tQbGFjZW1lbnQoY3JlYXRlUG9zLCBsZW4sIG5ld0F4aXMpKVxuICAgIHJldHVybiBjcmVhdGVTaGlwKHBsYXllciwgYm9hcmREaXYsIGNyZWF0ZVBvcywgbGVuLCBuZXdBeGlzKTtcblxuICByZXR1cm4gY3JlYXRlU2hpcChwbGF5ZXIsIGJvYXJkRGl2LCBjcmVhdGVQb3MsIGxlbiwgb2xkQXhpcyk7XG59XG5cbi8vIHBvcHVsYXRlIHRoZSBib2FyZCBkaXYgYW5kIHBsYXllcnMgYm9hcmRcbi8vIHdpdGggcmFuZG9tIHNoaXBzIHdpdGggc2hpcHNMZW5ndGhzIGRlZmluZWQgYmVmb3JlXG5mdW5jdGlvbiBwb3B1bGF0ZUJvYXJkUmFuZG9tKHBsYXllciwgYm9hcmREaXYsIHNoaXBzTGVuZ2h0cykge1xuICBzaGlwc0xlbmdodHMuZm9yRWFjaCgobGVuKSA9PiB7XG4gICAgY29uc3Qgc2hpcCA9IHBsYXllci5nZXRSYW5kb21TaGlwKGxlbik7XG4gICAgY3JlYXRlU2hpcChwbGF5ZXIsIGJvYXJkRGl2LCBzaGlwLmdldENyZWF0ZVBvcygpLCBsZW4sIHNoaXAuZ2V0QXhpcygpKTtcbiAgfSk7XG59XG5cbi8vIGluaXRpYWxpemUgdGhlIHNldHVwXG5mdW5jdGlvbiBpbml0aWFsaXplU2V0dXAobWFpbkRpdikge1xuICBjb25zdCBwbGF5ZXJCb2FyZERpdiA9IHBvcHVsYXRlZFNldHVwQm9hcmQoKTtcbiAgLy8gcGxheWVyQm9hcmREaXYuY2xhc3NMaXN0LmFkZChcInBsYXllclwiKTtcbiAgY29uc3QgcGxheWVyID0gUGxheWVyKCk7XG5cbiAgY29uc3QgYm9hcmREaXZDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBib2FyZERpdkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiYm9hcmQtY29udGFpbmVyXCIpO1xuICBib2FyZERpdkNvbnRhaW5lci5hcHBlbmRDaGlsZChwbGF5ZXJCb2FyZERpdik7XG5cbiAgY29uc3QgcmFuZG9tQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgcmFuZG9tQnV0dG9uLnRleHRDb250ZW50ID0gXCJyYW5kb21cIjtcbiAgcmFuZG9tQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJyYW5kb21cIik7XG5cbiAgY29uc3Qgc3RhcnRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBzdGFydEJ1dHRvbi50ZXh0Q29udGVudCA9IFwic3RhcnRcIjtcbiAgc3RhcnRCdXR0b24uY2xhc3NMaXN0LmFkZChcInN0YXJ0XCIpO1xuXG4gIG1haW5EaXYuYXBwZW5kQ2hpbGQoYm9hcmREaXZDb250YWluZXIpO1xuICBtYWluRGl2LmFwcGVuZENoaWxkKHJhbmRvbUJ1dHRvbik7XG4gIG1haW5EaXYuYXBwZW5kQ2hpbGQoc3RhcnRCdXR0b24pO1xuXG4gIHBvcHVsYXRlQm9hcmRSYW5kb20ocGxheWVyLCBwbGF5ZXJCb2FyZERpdiwgc2hpcHNMZW5naHRzKTtcbiAgYm9hcmRBY3RpdmF0ZShwbGF5ZXJCb2FyZERpdiwgcGxheWVyLmdldEdhbWVCb2FyZCgpKTtcbiAgcmFuZG9tQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcGxheWVyLmNsZWFyKCk7XG4gICAgY2xlYXJCb2FyZERpdihwbGF5ZXJCb2FyZERpdik7XG4gICAgcG9wdWxhdGVCb2FyZFJhbmRvbShwbGF5ZXIsIHBsYXllckJvYXJkRGl2LCBzaGlwc0xlbmdodHMpO1xuICAgIC8vIHJlbW92ZXMgdGhlIHNlbGVjdGVkIHNoaXAgZnJvbSBtZW1vcnkgZm9yIHNoaXAgcGxhY2VtZW50XG4gICAgcmVtb3ZlU2VsZWN0ZWRTaGlwKCk7XG4gIH0pO1xuXG4gIHN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY29uc3QgYWlQbGF5ZXIgPSBBaVBsYXllcigpO1xuICAgIGNvbnN0IGFpQm9hcmREaXYgPSBwb3B1bGF0ZWRTZXR1cEJvYXJkKCk7XG4gICAgcG9wdWxhdGVCb2FyZFJhbmRvbShhaVBsYXllciwgYWlCb2FyZERpdiwgc2hpcHNMZW5naHRzKTtcbiAgICBtYWluRGl2LmlubmVySFRNTCA9IFwiXCI7XG4gICAgbWFpbihtYWluRGl2LCBwbGF5ZXIsIGFpUGxheWVyLCBwbGF5ZXJCb2FyZERpdiwgYWlCb2FyZERpdik7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBpbml0aWFsaXplU2V0dXA7XG5cbmV4cG9ydCB7XG4gIHNoaXBzTGVuZ2h0cyxcbiAgY3JlYXRlU2hpcCxcbiAgcmVtb3ZlU2hpcCxcbiAgY2hhbmdlU2hpcEF4aXMsXG4gIHBvcHVsYXRlQm9hcmRSYW5kb20sXG59O1xuIiwiaW1wb3J0IGluaXRpYWxpemVTZXR1cCBmcm9tIFwiLi9zZXR1cFwiO1xuXG5jb25zdCBtYWluRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW5cIik7XG5pbml0aWFsaXplU2V0dXAobWFpbkRpdik7XG4iXSwibmFtZXMiOlsicHJlZGljdFNoaXBQb3NpdGlvbnMiLCJjcmVhdGVQb3MiLCJsZW4iLCJheGlzIiwicG9zaXRpb25zIiwiaSIsImoiLCJrIiwicHVzaCIsInN0YXRlIiwicHJlZGljdGVkUG9zaXRpb25zIiwicCIsIlN0cmluZyIsInNsaWNlIiwibGFzdFBvc2l0aW9uIiwiZ2V0UG9zaXRpb25zIiwiYWRkR2V0UG9zaXRpb25zIiwiaXNTdW5rIiwiT2JqZWN0IiwidmFsdWVzIiwiZXZlcnkiLCJ2YWx1ZSIsImFkZElzU3VuayIsImhpdCIsImhpdFBvc2l0aW9uIiwiYWRkSGl0IiwiZ2V0TGVuIiwiYWRkR2V0TGVuIiwiZ2V0Q3JlYXRlUG9zIiwiYWRkR2V0Q3JlYXRlUG9zIiwiZ2V0TGFzdFBvcyIsImFkZEdldExhc3RQb3MiLCJnZXRBeGlzIiwiYWRkR2V0QXhpcyIsImNoYW5nZUdhbWVCb2FyZFBvc2l0aW9ucyIsImZvckVhY2giLCJnZXRTaGlwUG9zaXRpb25zIiwic2hpcCIsImtleXMiLCJnZXRQb3NpdGlvbnNBcm91bmRTaGlwIiwic2hpcFBvc2l0aW9ucyIsImFyb3VuZFBvc2l0aW9ucyIsInBBc0xpc3QiLCJzcGxpdCIsIm5ld1BvcyIsImluY2x1ZGVzIiwiY3JlYXRlU2hpcCIsIlNoaXAiLCJjaGFuZ2VTaGlwUG9zaXRpb25zIiwiY2hhbmdlQXJvdW5kU2hpcFBvc2l0aW9ucyIsInNoaXBzIiwiYWRkU2hpcFRvR2FtZUJvYXJkU2hpcHMiLCJyZW1vdmVTaGlwIiwiZW1wdHlTaGlwUG9zaXRpb25zIiwiZW1wdHlBcm91bmRTaGlwUG9zaXRpb24iLCJzaGlwSW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwicmVtb3ZlU2hpcEZyb21HYW1lQm9hcmRTaGlwcyIsImdldEhpdFNoaXAiLCJhdHRhY2tQb3NpdGlvbiIsImNoZWNrQXR0YWNrIiwiZ2FtZUJvYXJkTGVuIiwiZ2V0U2hpcHMiLCJhZGRHZXRTaGlwcyIsImFkZENyZWF0ZVNoaXAiLCJhZGRSZW1vdmVTaGlwIiwiY2hhbmdlU2hpcEF4aXMiLCJuZXdBeGlzIiwiYWRkQ2hhbmdlU2hpcEF4aXMiLCJjaGVja1BsYWNlbWVudCIsImFkZENoZWNrUGxhY2VtZW50IiwicmVjZWl2ZUF0dGFjayIsImFkZFJlY2VpdmVBdHRhY2siLCJpc0dhbWVPdmVyIiwiZ2FtZU92ZXIiLCJhZGRpc0dhbWVPdmVyIiwiYWRkQ2hlY2tBdHRhY2siLCJhZGRHZXRQb3NpdGlvbnNBcm91bmRTaGlwIiwiaW5pdGlhbGl6ZVNob3RzIiwiYXZhaWxhYmxlU2hvdHMiLCJhZGRHZXRHYW1lQm9hcmQiLCJnZXRHYW1lQm9hcmQiLCJnYW1lQm9hcmQiLCJhZGRHZXRHYW1lQm9hcmRMZW4iLCJnZXRHYW1lQm9hcmRMZW4iLCJnZXRSYW5kb21Qb3NpdGlvbiIsImFsbFBvc2l0aW9ucyIsIk1hdGgiLCJmbG9vciIsImxlbmd0aCIsInJhbmRvbSIsImFkZEdldFJhbmRvbVNoaXAiLCJnZXRSYW5kb21TaGlwIiwicmFuZG9tUG9zIiwicmFuZG9tQXhpcyIsIm90aGVyQXhpcyIsImFkZENsZWFyIiwiY2xlYXIiLCJhZGRHZXRBdmFpbGFibGVTaG90cyIsImdldEF2YWlsYWJsZVNob3RzIiwiYWRkQXR0YWNrIiwiYXR0YWNrIiwib3BvbmVudEJvYXJkIiwicG9zaXRpb24iLCJwb3NpdGlvbkluZGV4IiwiQWlQbGF5ZXIiLCJHYW1lQm9hcmQiLCJnZXRBdHRhY2tQb3NpdGlvbiIsImFycmF5IiwiYWRkR2V0QXR0YWNrUG9zaXRpb24iLCJwb3B1bGF0ZWRTZXR1cEJvYXJkIiwiZGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwicG9zaXRpb25EaXYiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsImJvYXJkRGl2IiwibWFyayIsImNoaWxkcmVuIiwibWVzc2FnZSIsImdhbWVPdmVyRGl2IiwibWVzc2FnZURpdiIsInRleHRDb250ZW50IiwicGxheUFnYWluQnV0dG9uIiwiYWlBdHRhY2siLCJhaVBsYXllciIsInBsYXllckJvYXJkIiwicGxheWVyQm9hcmREaXYiLCJhaUJvYXJkRGl2IiwibWFpbkRpdiIsImFpQXR0YWNrUG9zaXRpb24iLCJhcnJvdW5kUG9zaXRpb25zIiwibWFya0JvYXJkRGl2IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbm5lckhUTUwiLCJpbml0aWFsaXplU2V0dXAiLCJzZWxlY3RlZFNoaXAiLCJlIiwidGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwic2hpcHNMZW5naHRzIiwicG9wdWxhdGVCb2FyZFJhbmRvbSIsInBsYXllciIsInNlbGVjdG9yIiwicmVwbGFjZSIsIm1hcmtTaGlwT25Cb2FyZCIsImJvYXJkRGl2Q29udGFpbmVyIiwicmFuZG9tQnV0dG9uIiwic3RhcnRCdXR0b24iLCJib2FyZEFjdGl2YXRlIiwiZWxlbWVudCIsInJlbW92ZSIsInVuZGVmaW5lZCIsImh1bWFuUGxheWVyIiwiYm9hcmRzQ29udGFpbmVyIiwiYWlQb3N0aW9uc0RpdnMiLCJhaUJvYXJkIiwicGxheWVyQXR0YWNrIiwibWFpbiJdLCJzb3VyY2VSb290IjoiIn0=