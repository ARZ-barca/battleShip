!function(){"use strict";function t(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function r(t,r,e){Object.keys(t.positions).forEach((function(t){var n=t.split(","),o='*[data-row="'.concat(n[0],'"][data-column="').concat(n[1],'"]');r.querySelector(o).classList.add(e)}))}function e(t,r,e){Object.keys(t.positions).forEach((function(t){var n=t.split(","),o='*[data-row="'.concat(n[0],'"][data-column="').concat(n[1],'"]');r.querySelector(o).classList.remove(e)}))}function n(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function o(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?n(Object(e),!0).forEach((function(r){i(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):n(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function i(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function a(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function c(t,r,e){var n=String(t).split(","),o=[];if("x"===e)for(var i=n[0],a=n[1],c=0;c<r;c++)o.push([+i,+a+c]);else if("y"===e)for(var u=n[0],s=n[1],f=0;f<r;f++)o.push([+u+f,+s]);return o}var u=function(t,r,e){var n,i={positions:{},createPos:t,axis:e,len:r},u=function(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,r){if(t){if("string"==typeof t)return a(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return c=t.done,t},e:function(t){u=!0,i=t},f:function(){try{c||null==e.return||e.return()}finally{if(u)throw i}}}}(c(t,r,e));try{for(u.s();!(n=u.n()).done;){var s=n.value;i.positions[String(s)]="good"}}catch(t){u.e(t)}finally{u.f()}return o(o({get positions(){return i.positions},get len(){return i.len},get axis(){return i.axis},get createPos(){return i.createPos}},function(t){return{isSunk:function(){return Object.values(t.positions).every((function(t){return"hit"===t}))}}}(i)),function(t){return{getHit:function(r){t.positions[String(r)]="hit"}}}(i))};function s(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?s(Object(e),!0).forEach((function(r){l(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):s(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function l(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function p(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,r){if(t){if("string"==typeof t)return d(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?d(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==e.return||e.return()}finally{if(c)throw i}}}}function d(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function y(t,r,e){r.forEach((function(r){t.positions[String(r)]=e}))}function v(t,r){var e=Object.keys(r.positions),n=[];return e.forEach((function(r){for(var e=r.split(","),o=-1;o<2;o+=1)for(var i=-1;i<2;i+=1){var a=String([+e[0]+o,+e[1]+i]);"empty"!==t.positions[a]&&"unavailable"!==t.positions[a]||n.includes(a)||n.push(a)}})),n}function h(t,r,e,n){var o=u(r,e,n);return y(t,Object.keys(o.positions),"ship"),y(t,v(t,o),"unavailable"),t.ships.push(o),o}function b(t,r){var e=t.ships.indexOf(r);t.ships.splice(e,1);var n=v(t,r).filter((function(r){var e=!0;return t.ships.forEach((function(n){v(t,n).includes(String(r))&&(e=!1)})),e}));y(t,n,"empty");var o=Object.keys(r.positions);y(t,o,"empty")}function m(t,r,e,n){var o,i=p(c(r,e,n));try{for(i.s();!(o=i.n()).done;){var a=o.value;if("empty"!==t.positions[String(a)])return!1}}catch(t){i.e(t)}finally{i.f()}return!0}function g(t,r){var e,n=p(t.ships);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(Object.keys(o.positions).includes(String(r)))return o}}catch(t){n.e(t)}finally{n.f()}}function O(t,r){for(var e=Object.keys(t.positions);;){var n=e[Math.floor(e.length*Math.random())],o=Math.floor(100*Math.random())%2==0?"x":"y";if(m(t,n,r,o))return u(n,r,o);var i="x"===o?"y":"x";if(m(t,n,r,i))return u(n,r,i);if(e.splice(e.indexOf(n),1),0===e.length)throw new Error("board is not big enough for this many ships")}}var S=function(t){for(var r={positions:{},ships:[],gameBoardLen:t},e=0;e<t;e++)for(var n=0;n<t;n++)r.positions[String([e,n])]="empty";return f(f(f(f(f(f(f(f(f(f({get positions(){return r.positions},get ships(){return r.ships}},function(t){return{createShip:function(r,e,n){return h(t,r,e,n)}}}(r)),function(t){return{removeShip:function(r){b(t,r)}}}(r)),function(t){return{checkPlacement:function(r,e,n){return m(t,r,e,n)}}}(r)),function(t){return{getHitShip:function(r){return g(t,r)}}}(r)),function(t){return{getHit:function(r){return function(t,r){var e=g(t,r);e&&e.getHit(r)}(t,r)}}}(r)),function(t){return{isGameOver:function(){return function(t){var r=!0;return t.ships.forEach((function(t){t.isSunk()||(r=!1)})),r}(t)}}}(r)),function(t){return{clear:function(){!function(t){for(var r=t.ships.length,e=0;e<r;e++)b(t,t.ships[0])}(t)}}}(r)),function(t){return{getRandomShip:function(r){return O(t,r)}}}(r)),function(t){return{randomize:function(r){!function(t,r){var e,n=p(r);try{for(n.s();!(e=n.n()).done;){var o=O(t,e.value);h(t,o.createPos,o.len,o.axis)}}catch(t){n.e(t)}finally{n.f()}}(t,r)}}}(r)),function(t){return{getPositionsAroundShip:function(r){return v(t,r)}}}(r))};function j(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function w(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var P,A=function(){for(var t={gameBoard:S(10),gameBoardLen:10,availableShots:[]},r=0;r<10;r++)for(var e=0;e<10;e++)t.availableShots.push(String([r,e]));return function(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?j(Object(e),!0).forEach((function(r){w(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):j(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}({get state(){return t},get gameBoard(){return t.gameBoard},get gameBoardLen(){return t.gameBoardLen},get availableShots(){return t.availableShots}},function(t){return{attack:function(r,e){return function(t,r,e){var n=t.availableShots.indexOf(String(e));-1!==n&&t.availableShots.splice(n,1),r.gameBoard.getHit(e);var o=r.gameBoard.getHitShip(e);o&&o.isSunk()&&r.gameBoard.getPositionsAroundShip(o).forEach((function(r){var e=t.availableShots.indexOf(String(r));-1!==e&&t.availableShots.splice(e,1)}))}(t,r,e)}}}(t))},E="ship",x="selected";function k(){P=void 0}function B(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var D=[4,3,3,2,2,2,1,1,1,1];!function(n){var o=function(t){for(var r=document.createElement("div"),e=0;e<10;e++)for(var n=0;n<10;n++){var o=document.createElement("div");o.setAttribute("data-row",e),o.setAttribute("data-column",n),r.appendChild(o)}return r.classList.add("board"),r}(),i=A(),a=document.createElement("div");a.classList.add("board-container"),a.appendChild(o);var c,u=document.createElement("button");u.textContent="random",u.classList.add("random"),n.appendChild(a),n.appendChild(u),i.gameBoard.randomize(D),i.gameBoard.ships.forEach((function(t){r(t,o,"ship")})),u.addEventListener("click",(function(){var e;(e=o.children,function(r){if(Array.isArray(r))return t(r)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(r,e){if(r){if("string"==typeof r)return t(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(r,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(t){t.className=""})),i.gameBoard.clear(),i.gameBoard.randomize(D),i.gameBoard.ships.forEach((function(t){r(t,o,"ship")})),k()})),(c=o.children,function(t){if(Array.isArray(t))return B(t)}(c)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(c)||function(t,r){if(t){if("string"==typeof t)return B(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?B(t,r):void 0}}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(t){t.addEventListener("click",(function(t){return function(t,n,o){var i=[t.getAttribute("data-row"),t.getAttribute("data-column")];if(!P){if(!t.className.includes(E))return;return P=n.getHitShip(i),n.removeShip(P),void r(P,o,x)}if(t.className.includes(E)){if(Object.keys(P.positions).includes(String(i))){var a="x"===P.axis?"y":"x";return void(n.checkPlacement(P.createPos,P.len,a)&&(e(P,o,x),e(P,o,E),r(n.createShip(P.createPos,P.len,a),o,E),k()))}return e(P,o,x),n.createShip(P.createPos,P.len,P.axis),P=n.getHitShip(i),n.removeShip(P),void r(P,o,x)}n.checkPlacement(i,P.len,P.axis)&&(e(P,o,x),e(P,o,E),r(n.createShip(i,P.len,P.axis),o,E),k())}(t.target,i.gameBoard,o)}))}))}(document.querySelector("main"))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBWSxDQUVsRSxJQUFNc0QsRUFBa0MsTUFBdEJrQixFQUFhN0QsS0FBZSxJQUFNLElBb0JwRCxZQWxCRThELEVBQVU5QixlQUNSNkIsRUFBYS9ELFVBQ2IrRCxFQUFhOUQsSUFDYjRDLEtBSUZoRCxFQUFrQmtFLEVBQWMvRSxFQUFVd0YsR0FDMUMzRSxFQUFrQmtFLEVBQWMvRSxFQUFVdUYsR0FNMUN6RixFQUxha0YsRUFBVXhDLFdBQ3JCdUMsRUFBYS9ELFVBQ2IrRCxFQUFhOUQsSUFDYjRDLEdBRW9CN0QsRUFBVXVGLEdBQ2hDRSxLQUlILENBV0QsT0FUQTVFLEVBQWtCa0UsRUFBYy9FLEVBQVV3RixHQUMxQ1IsRUFBVXhDLFdBQ1J1QyxFQUFhL0QsVUFDYitELEVBQWE5RCxJQUNiOEQsRUFBYTdELE1BRWY2RCxFQUFlQyxFQUFVN0IsV0FBVzVDLEdBQ3BDeUUsRUFBVXJDLFdBQVdvQyxRQUNyQmpGLEVBQWdCaUYsRUFBYy9FLEVBQVV3RixFQUV6QyxDQUdFUixFQUFVOUIsZUFBZTNDLEVBQVV3RSxFQUFhOUQsSUFBSzhELEVBQWE3RCxRQU1yRUwsRUFBa0JrRSxFQUFjL0UsRUFBVXdGLEdBQzFDM0UsRUFBa0JrRSxFQUFjL0UsRUFBVXVGLEdBTTFDekYsRUFMZ0JrRixFQUFVeEMsV0FDeEJqQyxFQUNBd0UsRUFBYTlELElBQ2I4RCxFQUFhN0QsTUFFVWxCLEVBQVV1RixHQUNuQ0UsSUFDRCxDQy9CS3VCLENBQVlGLEVBQUVHLE9BQVFaLEVBQU9yQixVQUFXYSxFQURSLEdBR25DLEdBU0YsQ0NuRURxQixDQURnQm5CLFNBQVNyRixjQUFjLFEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3NldHVwLWRvbS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3NoaXBzLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZUJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvcGxheWVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2hpcC1wbGFjZW1lbnQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9zZXR1cC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJldHVybnMgYSBwb3B1bGF0ZWQgZGl2IHdlIHVzZSBhcyBib2FyZCBmb3IgcGxhY2luZyBzaGlwIGluXHJcbmZ1bmN0aW9uIEJvYXJkRGl2KGxlbikge1xyXG4gIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBsZW47IGorKykge1xyXG4gICAgICBjb25zdCBwb3NpdGlvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgIHBvc2l0aW9uRGl2LnNldEF0dHJpYnV0ZShcImRhdGEtcm93XCIsIGkpO1xyXG4gICAgICBwb3NpdGlvbkRpdi5zZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbHVtblwiLCBqKTtcclxuICAgICAgZGl2LmFwcGVuZENoaWxkKHBvc2l0aW9uRGl2KTtcclxuICAgIH1cclxuICB9XHJcbiAgZGl2LmNsYXNzTGlzdC5hZGQoXCJib2FyZFwiKTtcclxuICByZXR1cm4gZGl2O1xyXG59XHJcblxyXG4vLyBhZGQgbWFyayB0byBzaGlwIHBvc2l0aW9uJ3MgY2xhc3NcclxuZnVuY3Rpb24gbWFya1NoaXBPbkJvYXJkKHNoaXAsIGJvYXJkRGl2LCBtYXJrKSB7XHJcbiAgT2JqZWN0LmtleXMoc2hpcC5wb3NpdGlvbnMpLmZvckVhY2goKHApID0+IHtcclxuICAgIGNvbnN0IHBvc2l0aW9uID0gcC5zcGxpdChcIixcIik7XHJcbiAgICBjb25zdCBzZWxlY3RvciA9IGAqW2RhdGEtcm93PVwiJHtwb3NpdGlvblswXX1cIl1bZGF0YS1jb2x1bW49XCIke3Bvc2l0aW9uWzFdfVwiXWA7XHJcbiAgICBjb25zdCBkb20gPSBib2FyZERpdi5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICAgIGRvbS5jbGFzc0xpc3QuYWRkKG1hcmspO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vLyByZW1vdmVzIGEgc2hpcCBmcm9tIGJvYXJkXHJcbmZ1bmN0aW9uIHVubWFya1NoaXBPbkJvYXJkKHNoaXAsIGJvYXJkRGl2LCBtYXJrKSB7XHJcbiAgT2JqZWN0LmtleXMoc2hpcC5wb3NpdGlvbnMpLmZvckVhY2goKHApID0+IHtcclxuICAgIGNvbnN0IHBvc2l0aW9uID0gcC5zcGxpdChcIixcIik7XHJcbiAgICBjb25zdCBzZWxlY3RvciA9IGAqW2RhdGEtcm93PVwiJHtwb3NpdGlvblswXX1cIl1bZGF0YS1jb2x1bW49XCIke3Bvc2l0aW9uWzFdfVwiXWA7XHJcbiAgICBjb25zdCBkb20gPSBib2FyZERpdi5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICAgIGRvbS5jbGFzc0xpc3QucmVtb3ZlKG1hcmspO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhckJvYXJkRGl2KGJvYXJkRGl2KSB7XHJcbiAgWy4uLmJvYXJkRGl2LmNoaWxkcmVuXS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICBlbGVtZW50LmNsYXNzTmFtZSA9IFwiXCI7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IEJvYXJkRGl2LCBtYXJrU2hpcE9uQm9hcmQsIHVubWFya1NoaXBPbkJvYXJkLCBjbGVhckJvYXJkRGl2IH07XHJcbiIsIi8vIG1ldGhvZCB0aGF0IG1hcmtzIGEgcG9zaXRpb24gYXMgaGl0XHJcbmZ1bmN0aW9uIGFkZEdldEhpdChzdGF0ZSkge1xyXG4gIHJldHVybiB7XHJcbiAgICBnZXRIaXQocG9zaXRpb24pIHtcclxuICAgICAgc3RhdGUucG9zaXRpb25zW1N0cmluZyhwb3NpdGlvbildID0gXCJoaXRcIjtcclxuICAgIH0sXHJcbiAgfTtcclxufVxyXG5cclxuLy8gY2hlY2sgaWYgc2hpcCBpcyBzdW5rXHJcbmNvbnN0IGFkZElzU3VuayA9IChzdGF0ZSkgPT4gKHtcclxuICBpc1N1bmsoKSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhzdGF0ZS5wb3NpdGlvbnMpLmV2ZXJ5KCh2YWx1ZSkgPT4gdmFsdWUgPT09IFwiaGl0XCIpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gcHJlZGljdHMgc2hpcCBwb3NpdGlvbnMgaWYgY3JlYXRlZCB0byBjaGVjayBmb3IgdGhlaXIgdmFsaWRpdHlcclxuZnVuY3Rpb24gcHJlZGljdFNoaXBQb3NpdGlvbnMoY3JlYXRlUG9zLCBsZW4sIGF4aXMpIHtcclxuICBjb25zdCBjcmVhdGVQb3NMaXN0ID0gU3RyaW5nKGNyZWF0ZVBvcykuc3BsaXQoXCIsXCIpO1xyXG4gIGNvbnN0IHBvc2l0aW9ucyA9IFtdO1xyXG4gIGlmIChheGlzID09PSBcInhcIikge1xyXG4gICAgZm9yIChsZXQgaSA9IGNyZWF0ZVBvc0xpc3RbMF0sIGogPSBjcmVhdGVQb3NMaXN0WzFdLCBrID0gMDsgayA8IGxlbjsgaysrKSB7XHJcbiAgICAgIHBvc2l0aW9ucy5wdXNoKFsraSwgK2ogKyBrXSk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIGlmIChheGlzID09PSBcInlcIikge1xyXG4gICAgZm9yIChsZXQgaSA9IGNyZWF0ZVBvc0xpc3RbMF0sIGogPSBjcmVhdGVQb3NMaXN0WzFdLCBrID0gMDsgayA8IGxlbjsgaysrKSB7XHJcbiAgICAgIHBvc2l0aW9ucy5wdXNoKFsraSArIGssICtqXSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcG9zaXRpb25zO1xyXG59XHJcblxyXG4vLyBnYW1lYm9hcmQgZmFjdG9yeSBmdW5jdGlvblxyXG5mdW5jdGlvbiBTaGlwKGNyZWF0ZVBvcywgbGVuLCBheGlzKSB7XHJcbiAgY29uc3Qgc3RhdGUgPSB7XHJcbiAgICBwb3NpdGlvbnM6IHt9LFxyXG4gICAgY3JlYXRlUG9zLFxyXG4gICAgYXhpcyxcclxuICAgIGxlbixcclxuICB9O1xyXG4gIC8vIHBvcHVsYXRpbmcgdGhlIHBvc2l0aW9ucyBvZiB0aGUgc2hpcFxyXG4gIGNvbnN0IHByZWRpY3RlZFBvc2l0aW9ucyA9IHByZWRpY3RTaGlwUG9zaXRpb25zKGNyZWF0ZVBvcywgbGVuLCBheGlzKTtcclxuICBmb3IgKGNvbnN0IHAgb2YgcHJlZGljdGVkUG9zaXRpb25zKSB7XHJcbiAgICBzdGF0ZS5wb3NpdGlvbnNbU3RyaW5nKHApXSA9IFwiZ29vZFwiO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGdldCBwb3NpdGlvbnMoKSB7XHJcbiAgICAgIHJldHVybiBzdGF0ZS5wb3NpdGlvbnM7XHJcbiAgICB9LFxyXG4gICAgZ2V0IGxlbigpIHtcclxuICAgICAgcmV0dXJuIHN0YXRlLmxlbjtcclxuICAgIH0sXHJcbiAgICBnZXQgYXhpcygpIHtcclxuICAgICAgcmV0dXJuIHN0YXRlLmF4aXM7XHJcbiAgICB9LFxyXG4gICAgZ2V0IGNyZWF0ZVBvcygpIHtcclxuICAgICAgcmV0dXJuIHN0YXRlLmNyZWF0ZVBvcztcclxuICAgIH0sXHJcbiAgICAuLi5hZGRJc1N1bmsoc3RhdGUpLFxyXG4gICAgLi4uYWRkR2V0SGl0KHN0YXRlKSxcclxuICB9O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTaGlwO1xyXG5leHBvcnQgeyBwcmVkaWN0U2hpcFBvc2l0aW9ucyB9O1xyXG4iLCJpbXBvcnQgU2hpcCwgeyBwcmVkaWN0U2hpcFBvc2l0aW9ucyB9IGZyb20gXCIuL3NoaXBzXCI7XHJcblxyXG4vLyByZXR1cm5zIGEgcmFuZG9tIGF4aXMgOiAneCcgb3IgJ3knXHJcbmZ1bmN0aW9uIGdldFJhbmRvbUF4aXMoKSB7XHJcbiAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMCkgJSAyID09PSAwID8gXCJ4XCIgOiBcInlcIjtcclxufVxyXG5cclxuLy8gY2hhbmdlIHRoZSBnaXZlbiBwb3NpdGlvbnMgaW4gdGhlIGdhbWUgYm9hcmRzXHJcbmZ1bmN0aW9uIGNoYW5nZUdhbWVCb2FyZFBvc2l0aW9ucyhzdGF0ZSwgcG9zaXRpb25zLCB2YWx1ZSkge1xyXG4gIHBvc2l0aW9ucy5mb3JFYWNoKChwKSA9PiB7XHJcbiAgICBzdGF0ZS5wb3NpdGlvbnNbU3RyaW5nKHApXSA9IHZhbHVlO1xyXG4gIH0pO1xyXG59XHJcblxyXG4vLyBnZXQgcG9zaXRpb25zIGFycm91bmQgc2hpcFxyXG5mdW5jdGlvbiBnZXRQb3NpdGlvbnNBcm91bmRTaGlwKHN0YXRlLCBzaGlwKSB7XHJcbiAgY29uc3Qgc2hpcFBvc2l0aW9ucyA9IE9iamVjdC5rZXlzKHNoaXAucG9zaXRpb25zKTtcclxuICBjb25zdCBhcm91bmRQb3NpdGlvbnMgPSBbXTtcclxuICBzaGlwUG9zaXRpb25zLmZvckVhY2goKHApID0+IHtcclxuICAgIGNvbnN0IHBBc0xpc3QgPSBwLnNwbGl0KFwiLFwiKTtcclxuICAgIGZvciAobGV0IGkgPSAtMTsgaSA8IDI7IGkgKz0gMSkge1xyXG4gICAgICBmb3IgKGxldCBqID0gLTE7IGogPCAyOyBqICs9IDEpIHtcclxuICAgICAgICBjb25zdCBuZXdQb3MgPSBTdHJpbmcoWytwQXNMaXN0WzBdICsgaSwgK3BBc0xpc3RbMV0gKyBqXSk7XHJcbiAgICAgICAgaWYgKFxyXG4gICAgICAgICAgKHN0YXRlLnBvc2l0aW9uc1tuZXdQb3NdID09PSBcImVtcHR5XCIgfHxcclxuICAgICAgICAgICAgc3RhdGUucG9zaXRpb25zW25ld1Bvc10gPT09IFwidW5hdmFpbGFibGVcIikgJiZcclxuICAgICAgICAgICFhcm91bmRQb3NpdGlvbnMuaW5jbHVkZXMobmV3UG9zKVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgYXJvdW5kUG9zaXRpb25zLnB1c2gobmV3UG9zKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuICByZXR1cm4gYXJvdW5kUG9zaXRpb25zO1xyXG59XHJcblxyXG4vLyBhZGRzIGdldCBwb3NpdGlvbnMgYXJvdW5kIHNoaXAgbWV0aG9kIHRvIG9iamVjdFxyXG5jb25zdCBhZGRHZXRQb3NpdGlvbnNBcm91bmRTaGlwID0gKHN0YXRlKSA9PiAoe1xyXG4gIGdldFBvc2l0aW9uc0Fyb3VuZFNoaXA6IChzaGlwKSA9PiBnZXRQb3NpdGlvbnNBcm91bmRTaGlwKHN0YXRlLCBzaGlwKSxcclxufSk7XHJcblxyXG4vLyBtZXRob2QgZm9yIHBsYWNpbmcgc2hpcHMgaW4gZ2FtZWJvYXJkIChyZXR1cm5zIHRoZSBzaGlwKVxyXG5mdW5jdGlvbiBjcmVhdGVTaGlwKHN0YXRlLCBjcmVhdGVQb3MsIGxlbiwgYXhpcykge1xyXG4gIGNvbnN0IHNoaXAgPSBTaGlwKGNyZWF0ZVBvcywgbGVuLCBheGlzKTtcclxuICAvLyBjaGFuZ2Ugc2hpcCdzIHBvc2l0aW9uc1xyXG4gIGNvbnN0IHNoaXBQb3NpdGlvbnMgPSBPYmplY3Qua2V5cyhzaGlwLnBvc2l0aW9ucyk7XHJcbiAgY2hhbmdlR2FtZUJvYXJkUG9zaXRpb25zKHN0YXRlLCBzaGlwUG9zaXRpb25zLCBcInNoaXBcIik7XHJcbiAgLy8gY2hhbmdlIHBvc2l0aW9ucyBhcnJvdW5kIHRoZSBzaGlwXHJcbiAgY29uc3QgYXJvdW5kUG9zaXRpb25zID0gZ2V0UG9zaXRpb25zQXJvdW5kU2hpcChzdGF0ZSwgc2hpcCk7XHJcbiAgY2hhbmdlR2FtZUJvYXJkUG9zaXRpb25zKHN0YXRlLCBhcm91bmRQb3NpdGlvbnMsIFwidW5hdmFpbGFibGVcIik7XHJcbiAgLy8gYWRkaW5nIHNoaXAgdG8gdGhlIGdhbWUgYm9hcmQgc2hpcHNcclxuICBzdGF0ZS5zaGlwcy5wdXNoKHNoaXApO1xyXG4gIHJldHVybiBzaGlwO1xyXG59XHJcblxyXG4vLyBhZGRzIHRoZSBjcmVhdGVTaGlwIG1ldGhvZCB0byBvYmplY3RcclxuY29uc3QgYWRkQ3JlYXRlU2hpcCA9IChzdGF0ZSkgPT4gKHtcclxuICBjcmVhdGVTaGlwOiAoY3JlYXRlUG9zLCBsZW4sIGF4aXMpID0+IGNyZWF0ZVNoaXAoc3RhdGUsIGNyZWF0ZVBvcywgbGVuLCBheGlzKSxcclxufSk7XHJcblxyXG4vLyBtZXRob2QgZm9yIHJlbW92aW5nIHRoZSBzaGlwIChuZWVkcyBvbmUgYXJnKVxyXG5mdW5jdGlvbiByZW1vdmVTaGlwKHN0YXRlLCBzaGlwKSB7XHJcbiAgLy8gcmVtb3ZlIHNoaXAgZnJvbSB0aGUgZ2FtZSBib2FyZCBzaGlwc1xyXG4gIGNvbnN0IHNoaXBJbmRleCA9IHN0YXRlLnNoaXBzLmluZGV4T2Yoc2hpcCk7XHJcbiAgc3RhdGUuc2hpcHMuc3BsaWNlKHNoaXBJbmRleCwgMSk7XHJcbiAgLy8gY2hhbmdlIHBvc2l0aW9ucyBhcnJvdW5kIHRoZSBzaGlwXHJcbiAgY29uc3QgYXJvdW5kUG9zaXRpb25zID0gZ2V0UG9zaXRpb25zQXJvdW5kU2hpcChzdGF0ZSwgc2hpcCk7XHJcbiAgLy8gZG9uJ3QgcmVtb3ZlIGlmIGl0cyBhcnJvdW5kIGFub3RoZXIgc2hpcFxyXG4gIGNvbnN0IG9ubHlBcm91bmRQb3NpdGlvbiA9IGFyb3VuZFBvc2l0aW9ucy5maWx0ZXIoKHApID0+IHtcclxuICAgIGxldCBvbmx5QXJvdW5kUCA9IHRydWU7XHJcbiAgICBzdGF0ZS5zaGlwcy5mb3JFYWNoKChzaGlwKSA9PiB7XHJcbiAgICAgIGlmIChnZXRQb3NpdGlvbnNBcm91bmRTaGlwKHN0YXRlLCBzaGlwKS5pbmNsdWRlcyhTdHJpbmcocCkpKSB7XHJcbiAgICAgICAgb25seUFyb3VuZFAgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb25seUFyb3VuZFA7XHJcbiAgfSk7XHJcbiAgY2hhbmdlR2FtZUJvYXJkUG9zaXRpb25zKHN0YXRlLCBvbmx5QXJvdW5kUG9zaXRpb24sIFwiZW1wdHlcIik7XHJcbiAgLy8gY2hhbmdlIHNoaXAncyBwb3NpdGlvbnNcclxuICBjb25zdCBzaGlwUG9zaXRpb25zID0gT2JqZWN0LmtleXMoc2hpcC5wb3NpdGlvbnMpO1xyXG4gIGNoYW5nZUdhbWVCb2FyZFBvc2l0aW9ucyhzdGF0ZSwgc2hpcFBvc2l0aW9ucywgXCJlbXB0eVwiKTtcclxufVxyXG5cclxuLy8gYWRkcyByZW1vdmVzaGlwIG1ldGhvZCB0byBhbiBvYmplY3RcclxuY29uc3QgYWRkUmVtb3ZlU2hpcCA9IChzdGF0ZSkgPT4gKHtcclxuICByZW1vdmVTaGlwOiAoc2hpcCkgPT4ge1xyXG4gICAgcmVtb3ZlU2hpcChzdGF0ZSwgc2hpcCk7XHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBtZXRob2QgdGhhdCBjaGVja3MgZm9yIHBsYWNlbWVudCB2YWxpZGl0eVxyXG5mdW5jdGlvbiBjaGVja1BsYWNlbWVudChzdGF0ZSwgY3JlYXRlUG9zLCBsZW4sIGF4aXMpIHtcclxuICBjb25zdCBwcmVkaWN0ZWRQb3NpdGlvbnMgPSBwcmVkaWN0U2hpcFBvc2l0aW9ucyhjcmVhdGVQb3MsIGxlbiwgYXhpcyk7XHJcbiAgZm9yIChjb25zdCBwIG9mIHByZWRpY3RlZFBvc2l0aW9ucykge1xyXG4gICAgaWYgKHN0YXRlLnBvc2l0aW9uc1tTdHJpbmcocCldICE9PSBcImVtcHR5XCIpIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLy8gYWRkcyBjaGVja1BsYWNlbWVudCBtZXRob2QgdG8gYW4gb2JqZWN0XHJcbmNvbnN0IGFkZENoZWNrUGxhY2VtZW50ID0gKHN0YXRlKSA9PiAoe1xyXG4gIGNoZWNrUGxhY2VtZW50OiAoY3JlYXRlUG9zLCBsZW4sIGF4aXMpID0+XHJcbiAgICBjaGVja1BsYWNlbWVudChzdGF0ZSwgY3JlYXRlUG9zLCBsZW4sIGF4aXMpLFxyXG59KTtcclxuXHJcbi8vIHJldHVybnMgdGhlIHNoaXAgdGhhdCBnb3QgaGl0XHJcbmZ1bmN0aW9uIGdldEhpdFNoaXAoc3RhdGUsIGF0dGFja1Bvc2l0aW9uKSB7XHJcbiAgZm9yIChjb25zdCBzaGlwIG9mIHN0YXRlLnNoaXBzKSB7XHJcbiAgICBpZiAoT2JqZWN0LmtleXMoc2hpcC5wb3NpdGlvbnMpLmluY2x1ZGVzKFN0cmluZyhhdHRhY2tQb3NpdGlvbikpKSB7XHJcbiAgICAgIHJldHVybiBzaGlwO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8gYWRkcyBnZXRIaXRTaGlwIG1ldGhvZCB0byBhbiBvYmplY3RcclxuY29uc3QgYWRkR2V0SGl0U2hpcCA9IChzdGF0ZSkgPT4gKHtcclxuICBnZXRIaXRTaGlwOiAoYXR0YWNrUG9zaXRpb24pID0+IGdldEhpdFNoaXAoc3RhdGUsIGF0dGFja1Bvc2l0aW9uKSxcclxufSk7XHJcblxyXG4vLyBtZXRob2QgZm9yIHJlY2VpZXZlaW5nIGFuIGF0dGFja1xyXG5mdW5jdGlvbiBnZXRIaXQoc3RhdGUsIGF0dGFja1Bvc2l0aW9uKSB7XHJcbiAgY29uc3Qgc2hpcCA9IGdldEhpdFNoaXAoc3RhdGUsIGF0dGFja1Bvc2l0aW9uKTtcclxuICBpZiAoc2hpcCkge1xyXG4gICAgLy8gYSBzaGlwIGdvdCBoaXRcclxuICAgIHNoaXAuZ2V0SGl0KGF0dGFja1Bvc2l0aW9uKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIGFkZHMgZ2V0SGl0IG1ldGhvZCB0byBhbiBvYmplY3RcclxuY29uc3QgYWRkR2V0SGl0ID0gKHN0YXRlKSA9PiAoe1xyXG4gIGdldEhpdDogKGF0dGFja1Bvc2l0aW9uKSA9PiBnZXRIaXQoc3RhdGUsIGF0dGFja1Bvc2l0aW9uKSxcclxufSk7XHJcblxyXG4vLyBtZXRob2QgZm9yIGNoZWNraW5nIGlmIHRoZSBnYW1lIGlzIG92ZXJcclxuZnVuY3Rpb24gaXNHYW1lT3ZlcihzdGF0ZSkge1xyXG4gIGxldCBnYW1lT3ZlciA9IHRydWU7XHJcbiAgc3RhdGUuc2hpcHMuZm9yRWFjaCgoc2hpcCkgPT4ge1xyXG4gICAgaWYgKCFzaGlwLmlzU3VuaygpKSB7XHJcbiAgICAgIGdhbWVPdmVyID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGdhbWVPdmVyO1xyXG59XHJcblxyXG4vLyBhZGQgaXNHYW1lT3ZlciB0byBhbiBvYmplY3RcclxuY29uc3QgYWRkaXNHYW1lT3ZlciA9IChzdGF0ZSkgPT4gKHtcclxuICBpc0dhbWVPdmVyOiAoKSA9PiBpc0dhbWVPdmVyKHN0YXRlKSxcclxufSk7XHJcblxyXG4vLyByZW1vdmVzIGFsbCBvZiBib2FyZCdzIHNoaXBzXHJcbmZ1bmN0aW9uIGNsZWFyKHN0YXRlKSB7XHJcbiAgY29uc3Qgc2hpcHNOdW1iZXIgPSBzdGF0ZS5zaGlwcy5sZW5ndGg7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwc051bWJlcjsgaSsrKSB7XHJcbiAgICByZW1vdmVTaGlwKHN0YXRlLCBzdGF0ZS5zaGlwc1swXSk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBhZGRDbGVhciA9IChzdGF0ZSkgPT4gKHtcclxuICBjbGVhcjogKCkgPT4ge1xyXG4gICAgY2xlYXIoc3RhdGUpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8gbWV0aG9kIHJldHVybnMgYSBTaGlwIHdpdGggcmFuZG9tIGNyZWF0ZSBsb2NhdGlvbiBhbmQgYXhpcyBhbmQgZ2l2ZW4gbGVuZ3RoXHJcbmZ1bmN0aW9uIGdldFJhbmRvbVNoaXAoc3RhdGUsIGxlbikge1xyXG4gIGNvbnN0IGFsbFBvc2l0aW9ucyA9IE9iamVjdC5rZXlzKHN0YXRlLnBvc2l0aW9ucyk7XHJcbiAgd2hpbGUgKHRydWUpIHtcclxuICAgIGNvbnN0IHJhbmRvbVBvcyA9XHJcbiAgICAgIGFsbFBvc2l0aW9uc1tNYXRoLmZsb29yKGFsbFBvc2l0aW9ucy5sZW5ndGggKiBNYXRoLnJhbmRvbSgpKV07XHJcbiAgICBjb25zdCByYW5kb21BeGlzID0gZ2V0UmFuZG9tQXhpcygpO1xyXG4gICAgaWYgKGNoZWNrUGxhY2VtZW50KHN0YXRlLCByYW5kb21Qb3MsIGxlbiwgcmFuZG9tQXhpcykpIHtcclxuICAgICAgcmV0dXJuIFNoaXAocmFuZG9tUG9zLCBsZW4sIHJhbmRvbUF4aXMpO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgb3RoZXJBeGlzID0gcmFuZG9tQXhpcyA9PT0gXCJ4XCIgPyBcInlcIiA6IFwieFwiO1xyXG4gICAgaWYgKGNoZWNrUGxhY2VtZW50KHN0YXRlLCByYW5kb21Qb3MsIGxlbiwgb3RoZXJBeGlzKSkge1xyXG4gICAgICByZXR1cm4gU2hpcChyYW5kb21Qb3MsIGxlbiwgb3RoZXJBeGlzKTtcclxuICAgIH1cclxuICAgIGFsbFBvc2l0aW9ucy5zcGxpY2UoYWxsUG9zaXRpb25zLmluZGV4T2YocmFuZG9tUG9zKSwgMSk7XHJcbiAgICBpZiAoYWxsUG9zaXRpb25zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJib2FyZCBpcyBub3QgYmlnIGVub3VnaCBmb3IgdGhpcyBtYW55IHNoaXBzXCIpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgYWRkR2V0UmFuZG9tU2hpcCA9IChzdGF0ZSkgPT4gKHtcclxuICBnZXRSYW5kb21TaGlwOiAobGVuKSA9PiBnZXRSYW5kb21TaGlwKHN0YXRlLCBsZW4pLFxyXG59KTtcclxuXHJcbi8vIG1ldGhvZCBmb3IgcmFuZG9taXppbmcgdGhlIGJvYXJkIHdpdGggZ2l2ZW4gYXJyYXlzIG9mIGxlbmd0aHNcclxuZnVuY3Rpb24gcmFuZG9taXplKHN0YXRlLCBsZW5ndGhzKSB7XHJcbiAgZm9yIChjb25zdCBsZW4gb2YgbGVuZ3Rocykge1xyXG4gICAgY29uc3Qgc2hpcCA9IGdldFJhbmRvbVNoaXAoc3RhdGUsIGxlbik7XHJcbiAgICBjcmVhdGVTaGlwKHN0YXRlLCBzaGlwLmNyZWF0ZVBvcywgc2hpcC5sZW4sIHNoaXAuYXhpcyk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBhZGRSYW5kb21pemUgPSAoc3RhdGUpID0+ICh7XHJcbiAgcmFuZG9taXplOiAobGVuZ3RocykgPT4ge1xyXG4gICAgcmFuZG9taXplKHN0YXRlLCBsZW5ndGhzKTtcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIGdhbWUgYm9hcmQgZmFjdG9yeSBmdW5jdGlvblxyXG5mdW5jdGlvbiBHYW1lQm9hcmQoZ2FtZUJvYXJkTGVuKSB7XHJcbiAgLy8gcG9zaXRpb25zIGluIGdhbWUgYm9hcmRcclxuICBjb25zdCBzdGF0ZSA9IHtcclxuICAgIHBvc2l0aW9uczoge30sXHJcbiAgICBzaGlwczogW10sXHJcbiAgICBnYW1lQm9hcmRMZW4sXHJcbiAgfTtcclxuXHJcbiAgLy8gcG9wdWxhdGluZyB0aGUgZ2FtZSBib2FyZFxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZ2FtZUJvYXJkTGVuOyBpKyspIHtcclxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgZ2FtZUJvYXJkTGVuOyBqKyspIHtcclxuICAgICAgc3RhdGUucG9zaXRpb25zW1N0cmluZyhbaSwgal0pXSA9IFwiZW1wdHlcIjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBnZXQgcG9zaXRpb25zKCkge1xyXG4gICAgICByZXR1cm4gc3RhdGUucG9zaXRpb25zO1xyXG4gICAgfSxcclxuICAgIGdldCBzaGlwcygpIHtcclxuICAgICAgcmV0dXJuIHN0YXRlLnNoaXBzO1xyXG4gICAgfSxcclxuICAgIC4uLmFkZENyZWF0ZVNoaXAoc3RhdGUpLFxyXG4gICAgLi4uYWRkUmVtb3ZlU2hpcChzdGF0ZSksXHJcbiAgICAvLyAuLi5hZGRDaGFuZ2VTaGlwQXhpcyhzdGF0ZSksXHJcbiAgICAuLi5hZGRDaGVja1BsYWNlbWVudChzdGF0ZSksXHJcbiAgICAuLi5hZGRHZXRIaXRTaGlwKHN0YXRlKSxcclxuICAgIC4uLmFkZEdldEhpdChzdGF0ZSksXHJcbiAgICAuLi5hZGRpc0dhbWVPdmVyKHN0YXRlKSxcclxuICAgIC4uLmFkZENsZWFyKHN0YXRlKSxcclxuICAgIC4uLmFkZEdldFJhbmRvbVNoaXAoc3RhdGUpLFxyXG4gICAgLi4uYWRkUmFuZG9taXplKHN0YXRlKSxcclxuICAgIC4uLmFkZEdldFBvc2l0aW9uc0Fyb3VuZFNoaXAoc3RhdGUpLFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEdhbWVCb2FyZDtcclxuZXhwb3J0IHsgZ2V0UmFuZG9tQXhpcyB9O1xyXG4iLCJpbXBvcnQgR2FtZUJvYXJkIGZyb20gXCIuL2dhbWVCb2FyZFwiO1xyXG5cclxuY29uc3QgZ2FtZUJvYXJkTGVuID0gMTA7XHJcblxyXG4vLyBhdHRhY2sgbWV0aG9kIGZvciBhIHBsYXllciB0byBhdHRhY2sgYW5vdGhlciBwbGF5ZXJcclxuZnVuY3Rpb24gYXR0YWNrKHN0YXRlLCB0YXJnZXRQbGF5ZXIsIHBvc2l0aW9uKSB7XHJcbiAgY29uc3QgcG9zaXRpb25JbmRleCA9IHN0YXRlLmF2YWlsYWJsZVNob3RzLmluZGV4T2YoU3RyaW5nKHBvc2l0aW9uKSk7XHJcbiAgaWYgKHBvc2l0aW9uSW5kZXggIT09IC0xKSB7XHJcbiAgICBzdGF0ZS5hdmFpbGFibGVTaG90cy5zcGxpY2UocG9zaXRpb25JbmRleCwgMSk7XHJcbiAgfVxyXG4gIHRhcmdldFBsYXllci5nYW1lQm9hcmQuZ2V0SGl0KHBvc2l0aW9uKTtcclxuXHJcbiAgY29uc3Qgc2hpcCA9IHRhcmdldFBsYXllci5nYW1lQm9hcmQuZ2V0SGl0U2hpcChwb3NpdGlvbik7XHJcbiAgaWYgKHNoaXAgJiYgc2hpcC5pc1N1bmsoKSkge1xyXG4gICAgLy8gaXQgaGl0IGEgc2hpcCBhbmQgc2hpcCBzdW5rXHJcbiAgICBjb25zdCBwb3NpdGlvbnMgPSB0YXJnZXRQbGF5ZXIuZ2FtZUJvYXJkLmdldFBvc2l0aW9uc0Fyb3VuZFNoaXAoc2hpcCk7XHJcbiAgICBwb3NpdGlvbnMuZm9yRWFjaCgocCkgPT4ge1xyXG4gICAgICBjb25zdCBwb3NpdGlvbkluZGV4ID0gc3RhdGUuYXZhaWxhYmxlU2hvdHMuaW5kZXhPZihTdHJpbmcocCkpO1xyXG4gICAgICBpZiAocG9zaXRpb25JbmRleCAhPT0gLTEpIHtcclxuICAgICAgICBzdGF0ZS5hdmFpbGFibGVTaG90cy5zcGxpY2UocG9zaXRpb25JbmRleCwgMSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gcmV0dXJuIHNoaXA7XHJcbn1cclxuXHJcbi8vIGFkZCBhdHRhY2sgbWV0aG9kIHRvIGFuIG9iamVjdFxyXG5jb25zdCBhZGRBdHRhY2sgPSAoc3RhdGUpID0+ICh7XHJcbiAgYXR0YWNrOiAodGFyZ2V0UGxheWVyLCBwb3NpdGlvbikgPT4gYXR0YWNrKHN0YXRlLCB0YXJnZXRQbGF5ZXIsIHBvc2l0aW9uKSxcclxufSk7XHJcblxyXG4vLyBjaG9vc2UgYSByYW5kb20gZWxlbWVudCBmcm9tIGFycmF5XHJcbmZ1bmN0aW9uIHJhbmRvbUVsZW1lbnQoYXJyYXkpIHtcclxuICBjb25zdCBsZW4gPSBhcnJheS5sZW5ndGg7XHJcbiAgY29uc3QgaSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxlbik7XHJcbiAgcmV0dXJuIGFycmF5W2ldO1xyXG59XHJcblxyXG4vLyBtZXRob2QgZm9yIGFpIHRvIGNob29zZSBhbiBhdHRhY2sgcG9zaXRpb25cclxuZnVuY3Rpb24gZ2V0QXR0YWNrUG9zaXRpb24oc3RhdGUpIHtcclxuICByZXR1cm4gcmFuZG9tRWxlbWVudChzdGF0ZS5hdmFpbGFibGVTaG90cyk7XHJcbn1cclxuXHJcbi8vIGFkZCBnZXRBdHRhY2tQb3NpdGlvbiBtZXRob2QgdG8gYW4gb2JqZWN0XHJcbmNvbnN0IGFkZEdldEF0dGFja1Bvc2l0aW9uID0gKHN0YXRlKSA9PiAoe1xyXG4gIGdldEF0dGFja1Bvc2l0aW9uOiAoKSA9PiBnZXRBdHRhY2tQb3NpdGlvbihzdGF0ZSksXHJcbn0pO1xyXG5cclxuLy8gZmFjdG9yeSBmdW5jdGlvbiBmb3IgaHVtYW4gUGxheWVyXHJcbmZ1bmN0aW9uIFBsYXllcigpIHtcclxuICBjb25zdCBzdGF0ZSA9IHtcclxuICAgIGdhbWVCb2FyZDogR2FtZUJvYXJkKGdhbWVCb2FyZExlbiksXHJcbiAgICBnYW1lQm9hcmRMZW4sXHJcbiAgICBhdmFpbGFibGVTaG90czogW10sXHJcbiAgfTtcclxuXHJcbiAgLy8gaW5pdGlhbGl6ZSB0aGUgYXZhaWxhYmxlIHNob3RzXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBnYW1lQm9hcmRMZW47IGkrKykge1xyXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBnYW1lQm9hcmRMZW47IGorKykge1xyXG4gICAgICBzdGF0ZS5hdmFpbGFibGVTaG90cy5wdXNoKFN0cmluZyhbaSwgal0pKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBnZXQgc3RhdGUoKSB7XHJcbiAgICAgIHJldHVybiBzdGF0ZTtcclxuICAgIH0sXHJcbiAgICBnZXQgZ2FtZUJvYXJkKCkge1xyXG4gICAgICByZXR1cm4gc3RhdGUuZ2FtZUJvYXJkO1xyXG4gICAgfSxcclxuICAgIGdldCBnYW1lQm9hcmRMZW4oKSB7XHJcbiAgICAgIHJldHVybiBzdGF0ZS5nYW1lQm9hcmRMZW47XHJcbiAgICB9LFxyXG4gICAgZ2V0IGF2YWlsYWJsZVNob3RzKCkge1xyXG4gICAgICByZXR1cm4gc3RhdGUuYXZhaWxhYmxlU2hvdHM7XHJcbiAgICB9LFxyXG4gICAgLi4uYWRkQXR0YWNrKHN0YXRlKSxcclxuICB9O1xyXG59XHJcblxyXG4vLyBmYWN0b3J5IGZ1bmN0aW9uIGZvciBhaSBQbGF5ZXJcclxuZnVuY3Rpb24gQWlQbGF5ZXIoKSB7XHJcbiAgY29uc3QgcGxheWVyID0gUGxheWVyKCk7XHJcbiAgY29uc3QgeyBzdGF0ZSB9ID0gcGxheWVyO1xyXG4gIHJldHVybiB7IC4uLnBsYXllciwgLi4uYWRkR2V0QXR0YWNrUG9zaXRpb24oc3RhdGUpIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBsYXllcjtcclxuZXhwb3J0IHsgZ2FtZUJvYXJkTGVuLCBBaVBsYXllciB9O1xyXG4iLCIvLyBpbXBvcnQgbWFya0JvYXJkRGl2IGZyb20gXCIuL2dhbWUtZG9tXCI7XHJcbi8vIGltcG9ydCB7IGdldEhpdFNoaXAgfSBmcm9tIFwiLi9nYW1lQm9hcmRcIjtcclxuLy8gaW1wb3J0IHsgZ2FtZUJvYXJkTGVuIH0gZnJvbSBcIi4vcGxheWVyXCI7XHJcbi8vIGltcG9ydCB7IHByZWRpY3RTaGlwUG9zaXRpb25zIH0gZnJvbSBcIi4vc2hpcHNcIjtcclxuXHJcbmltcG9ydCB7IG1hcmtTaGlwT25Cb2FyZCwgdW5tYXJrU2hpcE9uQm9hcmQgfSBmcm9tIFwiLi9zZXR1cC1kb21cIjtcclxuXHJcbmNvbnN0IHNoaXBNYXJrID0gXCJzaGlwXCI7XHJcbmNvbnN0IHNlbGVjdGVkTWFyayA9IFwic2VsZWN0ZWRcIjtcclxuXHJcbmxldCBzZWxlY3RlZFNoaXA7XHJcblxyXG4vL1xyXG5mdW5jdGlvbiByZW1vdmVTZWxlY3RlZFNoaXAoKSB7XHJcbiAgc2VsZWN0ZWRTaGlwID0gdW5kZWZpbmVkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZWxlY3RFdmVudChlbGVtZW50LCBnYW1lQm9hcmQsIGJvYXJkRGl2KSB7XHJcbiAgY29uc3QgcG9zaXRpb24gPSBbXHJcbiAgICBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtcm93XCIpLFxyXG4gICAgZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWNvbHVtblwiKSxcclxuICBdO1xyXG4gIGlmICghc2VsZWN0ZWRTaGlwKSB7XHJcbiAgICAvLyBubyBzaGlwIHdhcyBzZWxlY3RlZCBiZWZvcmVcclxuICAgIGlmICghZWxlbWVudC5jbGFzc05hbWUuaW5jbHVkZXMoc2hpcE1hcmspKSB7XHJcbiAgICAgIC8vIGNsaWNrZWQgb24gZW1wdHkgcG9zaXRpb25cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gY2xpY2tlZCBvbiBzaGlwXHJcbiAgICBzZWxlY3RlZFNoaXAgPSBnYW1lQm9hcmQuZ2V0SGl0U2hpcChwb3NpdGlvbik7XHJcbiAgICBnYW1lQm9hcmQucmVtb3ZlU2hpcChzZWxlY3RlZFNoaXApO1xyXG4gICAgbWFya1NoaXBPbkJvYXJkKHNlbGVjdGVkU2hpcCwgYm9hcmREaXYsIHNlbGVjdGVkTWFyayk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIC8vIGEgc2hpcCB3YXMgc2VsZWN0ZWQgYmVmb3JlXHJcbiAgaWYgKGVsZW1lbnQuY2xhc3NOYW1lLmluY2x1ZGVzKHNoaXBNYXJrKSkge1xyXG4gICAgLy8gY2xpY2tlZCBvbiBhIHNoaXBcclxuICAgIGlmIChPYmplY3Qua2V5cyhzZWxlY3RlZFNoaXAucG9zaXRpb25zKS5pbmNsdWRlcyhTdHJpbmcocG9zaXRpb24pKSkge1xyXG4gICAgICAvLyBjbGlja2VkIHRoZSBzYW1lIHNoaXBcclxuICAgICAgY29uc3Qgb3RoZXJBeGlzID0gc2VsZWN0ZWRTaGlwLmF4aXMgPT09IFwieFwiID8gXCJ5XCIgOiBcInhcIjtcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGdhbWVCb2FyZC5jaGVja1BsYWNlbWVudChcclxuICAgICAgICAgIHNlbGVjdGVkU2hpcC5jcmVhdGVQb3MsXHJcbiAgICAgICAgICBzZWxlY3RlZFNoaXAubGVuLFxyXG4gICAgICAgICAgb3RoZXJBeGlzXHJcbiAgICAgICAgKVxyXG4gICAgICApIHtcclxuICAgICAgICAvLyBzaGlwJ3MgYXhpcyBjYW4gYmUgY2hhbmdlZFxyXG4gICAgICAgIHVubWFya1NoaXBPbkJvYXJkKHNlbGVjdGVkU2hpcCwgYm9hcmREaXYsIHNlbGVjdGVkTWFyayk7XHJcbiAgICAgICAgdW5tYXJrU2hpcE9uQm9hcmQoc2VsZWN0ZWRTaGlwLCBib2FyZERpdiwgc2hpcE1hcmspO1xyXG4gICAgICAgIGNvbnN0IHNoaXAgPSBnYW1lQm9hcmQuY3JlYXRlU2hpcChcclxuICAgICAgICAgIHNlbGVjdGVkU2hpcC5jcmVhdGVQb3MsXHJcbiAgICAgICAgICBzZWxlY3RlZFNoaXAubGVuLFxyXG4gICAgICAgICAgb3RoZXJBeGlzXHJcbiAgICAgICAgKTtcclxuICAgICAgICBtYXJrU2hpcE9uQm9hcmQoc2hpcCwgYm9hcmREaXYsIHNoaXBNYXJrKTtcclxuICAgICAgICByZW1vdmVTZWxlY3RlZFNoaXAoKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBzaGlwIGF4aXMgY2FuJ3QgYmUgY2hhbmdlZFxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBjbGlja2VkIGFub3RoZXIgc2hpcFxyXG4gICAgdW5tYXJrU2hpcE9uQm9hcmQoc2VsZWN0ZWRTaGlwLCBib2FyZERpdiwgc2VsZWN0ZWRNYXJrKTtcclxuICAgIGdhbWVCb2FyZC5jcmVhdGVTaGlwKFxyXG4gICAgICBzZWxlY3RlZFNoaXAuY3JlYXRlUG9zLFxyXG4gICAgICBzZWxlY3RlZFNoaXAubGVuLFxyXG4gICAgICBzZWxlY3RlZFNoaXAuYXhpc1xyXG4gICAgKTtcclxuICAgIHNlbGVjdGVkU2hpcCA9IGdhbWVCb2FyZC5nZXRIaXRTaGlwKHBvc2l0aW9uKTtcclxuICAgIGdhbWVCb2FyZC5yZW1vdmVTaGlwKHNlbGVjdGVkU2hpcCk7XHJcbiAgICBtYXJrU2hpcE9uQm9hcmQoc2VsZWN0ZWRTaGlwLCBib2FyZERpdiwgc2VsZWN0ZWRNYXJrKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgLy8gY2xpY2tlZCBvbiBlbXB0eSBwb3NpdGlvbnNcclxuICBpZiAoXHJcbiAgICAhZ2FtZUJvYXJkLmNoZWNrUGxhY2VtZW50KHBvc2l0aW9uLCBzZWxlY3RlZFNoaXAubGVuLCBzZWxlY3RlZFNoaXAuYXhpcylcclxuICApIHtcclxuICAgIC8vIGNhbid0IHBsYWNlIHNlbGVjdGVkIHNoaXBcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgLy8gY2FuIHBsYWNlIHRoZSBzaGlwIHRoZXJlXHJcbiAgdW5tYXJrU2hpcE9uQm9hcmQoc2VsZWN0ZWRTaGlwLCBib2FyZERpdiwgc2VsZWN0ZWRNYXJrKTtcclxuICB1bm1hcmtTaGlwT25Cb2FyZChzZWxlY3RlZFNoaXAsIGJvYXJkRGl2LCBzaGlwTWFyayk7XHJcbiAgY29uc3QgbmV3U2hpcCA9IGdhbWVCb2FyZC5jcmVhdGVTaGlwKFxyXG4gICAgcG9zaXRpb24sXHJcbiAgICBzZWxlY3RlZFNoaXAubGVuLFxyXG4gICAgc2VsZWN0ZWRTaGlwLmF4aXNcclxuICApO1xyXG4gIG1hcmtTaGlwT25Cb2FyZChuZXdTaGlwLCBib2FyZERpdiwgc2hpcE1hcmspO1xyXG4gIHJlbW92ZVNlbGVjdGVkU2hpcCgpO1xyXG59XHJcblxyXG4vLyBleHBvcnQgZGVmYXVsdCBib2FyZEFjdGl2YXRlO1xyXG5leHBvcnQgeyByZW1vdmVTZWxlY3RlZFNoaXAgfTtcclxuZXhwb3J0IGRlZmF1bHQgc2VsZWN0RXZlbnQ7XHJcbiIsImltcG9ydCB7IEJvYXJkRGl2LCBjbGVhckJvYXJkRGl2LCBtYXJrU2hpcE9uQm9hcmQgfSBmcm9tIFwiLi9zZXR1cC1kb21cIjtcclxuaW1wb3J0IFBsYXllciwgeyBnYW1lQm9hcmRMZW4gfSBmcm9tIFwiLi9wbGF5ZXJcIjtcclxuaW1wb3J0IHNlbGVjdEV2ZW50LCB7IHJlbW92ZVNlbGVjdGVkU2hpcCB9IGZyb20gXCIuL3NoaXAtcGxhY2VtZW50XCI7XHJcblxyXG4vLyBzaGlwcyB0byBiZSBjcmVhdGVkIGxlbmd0aHNcclxuY29uc3Qgc2hpcHNMZW5naHRzID0gWzQsIDMsIDMsIDIsIDIsIDIsIDEsIDEsIDEsIDFdO1xyXG5cclxuLy8gLy8gY2hhbmdlcyBhIHNoaXAgYXhpcyBpbiBib2FyZCBkaXYgYW5kIGluIHBsYXllcidzIGJvYXJkIG9iamVjdCBpZiBwb3NzaWJsZVxyXG4vLyBmdW5jdGlvbiBjaGFuZ2VTaGlwQXhpcyhzaGlwLCBwbGF5ZXIsIGJvYXJkRGl2KSB7XHJcbi8vICAgcmVtb3ZlU2hpcChzaGlwLCBwbGF5ZXIsIGJvYXJkRGl2KTtcclxuLy8gICBjb25zdCBjcmVhdGVQb3MgPSBzaGlwLmdldENyZWF0ZVBvcygpO1xyXG4vLyAgIGNvbnN0IGxlbiA9IHNoaXAuZ2V0TGVuKCk7XHJcbi8vICAgY29uc3Qgb2xkQXhpcyA9IHNoaXAuZ2V0QXhpcygpO1xyXG4vLyAgIGNvbnN0IG5ld0F4aXMgPSBvbGRBeGlzID09PSBcInhcIiA/IFwieVwiIDogXCJ4XCI7XHJcbi8vICAgaWYgKHBsYXllci5jaGVja1BsYWNlbWVudChjcmVhdGVQb3MsIGxlbiwgbmV3QXhpcykpXHJcbi8vICAgICByZXR1cm4gY3JlYXRlU2hpcChwbGF5ZXIsIGJvYXJkRGl2LCBjcmVhdGVQb3MsIGxlbiwgbmV3QXhpcyk7XHJcblxyXG4vLyAgIHJldHVybiBjcmVhdGVTaGlwKHBsYXllciwgYm9hcmREaXYsIGNyZWF0ZVBvcywgbGVuLCBvbGRBeGlzKTtcclxuLy8gfVxyXG5cclxuLy8gaW5pdGlhbGl6ZSB0aGUgc2V0dXBcclxuZnVuY3Rpb24gaW5pdGlhbGl6ZVNldHVwKG1haW5EaXYpIHtcclxuICBjb25zdCBwbGF5ZXJCb2FyZERpdiA9IEJvYXJkRGl2KGdhbWVCb2FyZExlbik7XHJcbiAgY29uc3QgcGxheWVyID0gUGxheWVyKCk7XHJcblxyXG4gIGNvbnN0IGJvYXJkRGl2Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICBib2FyZERpdkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiYm9hcmQtY29udGFpbmVyXCIpO1xyXG4gIGJvYXJkRGl2Q29udGFpbmVyLmFwcGVuZENoaWxkKHBsYXllckJvYXJkRGl2KTtcclxuXHJcbiAgY29uc3QgcmFuZG9tQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICByYW5kb21CdXR0b24udGV4dENvbnRlbnQgPSBcInJhbmRvbVwiO1xyXG4gIHJhbmRvbUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicmFuZG9tXCIpO1xyXG5cclxuICAvLyBjb25zdCBzdGFydEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgLy8gc3RhcnRCdXR0b24udGV4dENvbnRlbnQgPSBcInN0YXJ0XCI7XHJcbiAgLy8gc3RhcnRCdXR0b24uY2xhc3NMaXN0LmFkZChcInN0YXJ0XCIpO1xyXG5cclxuICBtYWluRGl2LmFwcGVuZENoaWxkKGJvYXJkRGl2Q29udGFpbmVyKTtcclxuICBtYWluRGl2LmFwcGVuZENoaWxkKHJhbmRvbUJ1dHRvbik7XHJcbiAgLy8gbWFpbkRpdi5hcHBlbmRDaGlsZChzdGFydEJ1dHRvbik7XHJcblxyXG4gIC8vIHBvcHVsYXRlIGdhbWUgYm9hcmQgYW5kIGJvYXJkIGRpdiB3aXRoIHJhbmRvbSBzaGlwc1xyXG4gIHBsYXllci5nYW1lQm9hcmQucmFuZG9taXplKHNoaXBzTGVuZ2h0cyk7XHJcbiAgcGxheWVyLmdhbWVCb2FyZC5zaGlwcy5mb3JFYWNoKChzaGlwKSA9PiB7XHJcbiAgICBtYXJrU2hpcE9uQm9hcmQoc2hpcCwgcGxheWVyQm9hcmREaXYsIFwic2hpcFwiKTtcclxuICB9KTtcclxuXHJcbiAgcmFuZG9tQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBjbGVhckJvYXJkRGl2KHBsYXllckJvYXJkRGl2KTtcclxuICAgIHBsYXllci5nYW1lQm9hcmQuY2xlYXIoKTtcclxuICAgIHBsYXllci5nYW1lQm9hcmQucmFuZG9taXplKHNoaXBzTGVuZ2h0cyk7XHJcbiAgICBwbGF5ZXIuZ2FtZUJvYXJkLnNoaXBzLmZvckVhY2goKHNoaXApID0+IHtcclxuICAgICAgbWFya1NoaXBPbkJvYXJkKHNoaXAsIHBsYXllckJvYXJkRGl2LCBcInNoaXBcIik7XHJcbiAgICB9KTtcclxuICAgIHJlbW92ZVNlbGVjdGVkU2hpcCgpO1xyXG4gIH0pO1xyXG5cclxuICBbLi4ucGxheWVyQm9hcmREaXYuY2hpbGRyZW5dLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PlxyXG4gICAgICBzZWxlY3RFdmVudChlLnRhcmdldCwgcGxheWVyLmdhbWVCb2FyZCwgcGxheWVyQm9hcmREaXYpXHJcbiAgICApO1xyXG4gIH0pO1xyXG5cclxuICAvLyBzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIC8vICAgY29uc3QgYWlQbGF5ZXIgPSBBaVBsYXllcigpO1xyXG4gIC8vICAgY29uc3QgYWlCb2FyZERpdiA9IHBvcHVsYXRlZFNldHVwQm9hcmQoKTtcclxuICAvLyAgIHBvcHVsYXRlQm9hcmRSYW5kb20oYWlQbGF5ZXIsIGFpQm9hcmREaXYsIHNoaXBzTGVuZ2h0cyk7XHJcbiAgLy8gICBtYWluRGl2LmlubmVySFRNTCA9IFwiXCI7XHJcbiAgLy8gICBtYWluKG1haW5EaXYsIHBsYXllciwgYWlQbGF5ZXIsIHBsYXllckJvYXJkRGl2LCBhaUJvYXJkRGl2KTtcclxuICAvLyB9KTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgaW5pdGlhbGl6ZVNldHVwO1xyXG5cclxuZXhwb3J0IHtcclxuICBzaGlwc0xlbmdodHMsXHJcbiAgLy8gY3JlYXRlU2hpcCxcclxuICAvLyByZW1vdmVTaGlwLFxyXG4gIC8vIGNoYW5nZVNoaXBBeGlzLFxyXG4gIC8vIHBvcHVsYXRlQm9hcmRSYW5kb20sXHJcbn07XHJcbiIsImltcG9ydCBpbml0aWFsaXplU2V0dXAgZnJvbSBcIi4vc2V0dXBcIjtcclxuXHJcbmNvbnN0IG1haW5EaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWFpblwiKTtcclxuaW5pdGlhbGl6ZVNldHVwKG1haW5EaXYpO1xyXG4iXSwibmFtZXMiOlsibWFya1NoaXBPbkJvYXJkIiwic2hpcCIsImJvYXJkRGl2IiwibWFyayIsIk9iamVjdCIsImtleXMiLCJwb3NpdGlvbnMiLCJmb3JFYWNoIiwicCIsInBvc2l0aW9uIiwic3BsaXQiLCJzZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3IiLCJjbGFzc0xpc3QiLCJhZGQiLCJ1bm1hcmtTaGlwT25Cb2FyZCIsInJlbW92ZSIsInByZWRpY3RTaGlwUG9zaXRpb25zIiwiY3JlYXRlUG9zIiwibGVuIiwiYXhpcyIsImNyZWF0ZVBvc0xpc3QiLCJTdHJpbmciLCJpIiwiaiIsImsiLCJwdXNoIiwic3RhdGUiLCJpc1N1bmsiLCJ2YWx1ZXMiLCJldmVyeSIsInZhbHVlIiwiYWRkSXNTdW5rIiwiZ2V0SGl0IiwiYWRkR2V0SGl0IiwiY2hhbmdlR2FtZUJvYXJkUG9zaXRpb25zIiwiZ2V0UG9zaXRpb25zQXJvdW5kU2hpcCIsInNoaXBQb3NpdGlvbnMiLCJhcm91bmRQb3NpdGlvbnMiLCJwQXNMaXN0IiwibmV3UG9zIiwiaW5jbHVkZXMiLCJjcmVhdGVTaGlwIiwiU2hpcCIsInNoaXBzIiwicmVtb3ZlU2hpcCIsInNoaXBJbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJvbmx5QXJvdW5kUG9zaXRpb24iLCJmaWx0ZXIiLCJvbmx5QXJvdW5kUCIsImNoZWNrUGxhY2VtZW50IiwiZ2V0SGl0U2hpcCIsImF0dGFja1Bvc2l0aW9uIiwiZ2V0UmFuZG9tU2hpcCIsImFsbFBvc2l0aW9ucyIsInJhbmRvbVBvcyIsIk1hdGgiLCJmbG9vciIsImxlbmd0aCIsInJhbmRvbSIsInJhbmRvbUF4aXMiLCJvdGhlckF4aXMiLCJFcnJvciIsImdhbWVCb2FyZExlbiIsImFkZENyZWF0ZVNoaXAiLCJhZGRSZW1vdmVTaGlwIiwiYWRkQ2hlY2tQbGFjZW1lbnQiLCJhZGRHZXRIaXRTaGlwIiwiaXNHYW1lT3ZlciIsImdhbWVPdmVyIiwiYWRkaXNHYW1lT3ZlciIsImNsZWFyIiwic2hpcHNOdW1iZXIiLCJhZGRDbGVhciIsImFkZEdldFJhbmRvbVNoaXAiLCJyYW5kb21pemUiLCJsZW5ndGhzIiwiYWRkUmFuZG9taXplIiwiYWRkR2V0UG9zaXRpb25zQXJvdW5kU2hpcCIsInNlbGVjdGVkU2hpcCIsImdhbWVCb2FyZCIsIkdhbWVCb2FyZCIsImF2YWlsYWJsZVNob3RzIiwiYXR0YWNrIiwidGFyZ2V0UGxheWVyIiwicG9zaXRpb25JbmRleCIsImFkZEF0dGFjayIsInNoaXBNYXJrIiwic2VsZWN0ZWRNYXJrIiwicmVtb3ZlU2VsZWN0ZWRTaGlwIiwidW5kZWZpbmVkIiwic2hpcHNMZW5naHRzIiwibWFpbkRpdiIsInBsYXllckJvYXJkRGl2IiwiZGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwicG9zaXRpb25EaXYiLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmRDaGlsZCIsIkJvYXJkRGl2IiwicGxheWVyIiwiUGxheWVyIiwiYm9hcmREaXZDb250YWluZXIiLCJyYW5kb21CdXR0b24iLCJ0ZXh0Q29udGVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjaGlsZHJlbiIsImVsZW1lbnQiLCJjbGFzc05hbWUiLCJlIiwiZ2V0QXR0cmlidXRlIiwic2VsZWN0RXZlbnQiLCJ0YXJnZXQiLCJpbml0aWFsaXplU2V0dXAiXSwic291cmNlUm9vdCI6IiJ9